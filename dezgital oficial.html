<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dezgital - Tu Visión, Nuestra Creación Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

    <script>
        // --- Global Utility Functions (will be called by React components) ---

        /**
         * Displays a custom message modal.
         * @param {string} title - The modal title.
         * @param {string} message - The message to display (can contain basic HTML like <strong>).
         * @param {string|null} link - An optional link for the "Back to Home" button.
         */
        window.showMessageModal = function(title, message, link = null) {
            const modal = document.getElementById('messageModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalLink = document.getElementById('modalLink');

            if (!modal || !modalTitle || !modalMessage || !modalLink) {
                console.error("Modal elements not found. Cannot show message modal.");
                return;
            }

            modalTitle.textContent = title;
            modalMessage.innerHTML = message; // Use innerHTML to allow formatting like **text**
            modalLink.classList.add('hidden'); // Hide by default

            if (link) {
                modalLink.href = link;
                modalLink.textContent = "Back to Home";
                modalLink.classList.remove('hidden');
            }

            modal.style.display = 'flex'; // Show the modal
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        };

        /**
         * Closes the message modal.
         */
        window.closeMessageModal = function() {
            const modal = document.getElementById('messageModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = ''; // Enable background scrolling
                // Remove dynamic payment options if added to clean up the modal
                const paymentMethodsDiv = document.querySelector('#messageModal .modal-content .payment-methods');
                if (paymentMethodsDiv) {
                    paymentMethodsDiv.remove();
                }
            }
        };

        // Event listeners for the modal (attached once)
        document.addEventListener('DOMContentLoaded', () => {
            const closeButton = document.querySelector('#messageModal .close-button');
            if (closeButton) {
                closeButton.addEventListener('click', window.closeMessageModal);
            }
            const modal = document.getElementById('messageModal');
            if (modal) {
                window.addEventListener('click', (event) => {
                    if (event.target === modal) {
                        window.closeMessageModal();
                    }
                });
            }
        });

        // --- Existing JavaScript for visual effects and navigation (can remain global) ---

        // Smooth scrolling for navigation links
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    // This logic will be handled by React's `setCurrentPage` and `handleNavLinkClick`
                    // For now, keep it as a fallback or for external links not managed by React state.
                    const target = document.querySelector(targetId);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Enhanced visual effects (navbar and floating elements)
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const navbar = document.querySelector('.navbar');
                if (navbar) { // Check if navbar exists before manipulating it
                    if (scrolled > 50) {
                        navbar.classList.add('scrolled');
                    } else {
                        navbar.classList.remove('scrolled');
                    }
                }

                const elements = document.querySelectorAll('.floating-element');
                elements.forEach((element, index) => {
                    const speed = 0.3 + (index * 0.1);
                    element.style.transform = `translateY(${scrolled * speed}px) rotate(${scrolled * 0.05}deg)`;
                });
            });

            // Form field animations (focus/blur)
            document.querySelectorAll('.form-input, .form-select, .form-textarea').forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.transform = 'scale(1.02)';
                });
                input.addEventListener('blur', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });

    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Dynamic CSS color variables
                        'dez-primary': 'var(--color-primary-var)',
                        'dez-secondary': 'var(--color-secondary-var)',
                        'dez-dark-text': 'var(--color-dez-dark-text)',
                        'dez-gray-text': 'var(--color-dez-gray-text)',
                        'dez-card-light': 'var(--bg-card-light)',
                        'dez-card-border': 'var(--border-card-light)',
                    },
                    fontSize: {
                        '10xl': '10rem',
                        '11xl': '12rem',
                    }
                }
            }
        }
    </script>

    <style>
        /* CSS variables definition for the light theme (default) */
        :root {
            --bg-main: linear-gradient(135deg, #f0f4f8 0%, #e0f7fa 50%, #f3e5f5 100%);
            --color-dez-dark-text: #263238; /* Dark text for light theme */
            --color-dez-gray-text: #546e7a; /* Gray text for light theme */
            --color-primary-var: #00f5ff; /* Cyan from Servicio.rtf */
            --color-secondary-var: #ff006e; /* Bright pink/Magenta from Servicio.rtf */
            --bg-card-light: rgba(255, 255, 255, 0.7);
            --border-card-light: rgba(226, 232, 240, 0.7); /* gray-200 */
            --shadow-color: rgba(0, 0, 0, 0.1);
            --navbar-bg: rgba(255, 255, 255, 0.1); /* Initial transparent background */
            --navbar-scrolled-bg: rgba(224, 247, 250, 0.7); /* Light blue from dez, more opaque when scrolled */
            --icon-lightbulb-color: #f0f4f8; /* Color for off lightbulb (light) */
            --icon-lightbulb-shadow: none;
            --icon-palette-color: #546e7a; /* Gray for palette in light theme */
            --icon-palette-shadow: none;


            /* Hero background for light theme - NOW MORE SUBTLE */
            --hero-bg-radial1: rgba(120, 119, 198, 0.01);
            --hero-bg-radial2: rgba(255, 119, 198, 0.01);
            --hero-bg-radial3: rgba(120, 119, 198, 0.005);

            /* Floating elements opacity for light theme - EVEN MORE TRANSPARENCY */
            --floating-element-bg-opacity: 0.05; /* More transparent */
            --floating-element-border-opacity: 0.03; /* More transparent */

            /* Section background colors for light theme (with transparency for blur effect) - INCREASED */
            --section-services-bg: rgba(200, 230, 255, 0.3); /* Opacity adjusted to 0.3 */
            --section-pricing-bg: rgba(224, 247, 250, 0.8); /* Opacity adjusted to 0.8 for more visibility */
            --section-about-us-bg: rgba(224, 247, 250, 0.8); /* Opacity adjusted to 0.8 for more visibility */
            --section-contact-bg: rgba(243, 229, 245, 0.3); /* Opacity adjusted to 0.3 */
            --section-footer-bg: rgba(255, 255, 255, 0.3); /* Opacity adjusted to 0.3 */

            /* Specific colors for Contact cards (Light Mode) */
            --contact-instagram-card-bg: rgba(255, 240, 245, 0.8); /* Lighter pink */
            --contact-whatsapp-card-bg: rgba(230, 255, 230, 0.8); /* Lighter green */
            --contact-email-card-bg: rgba(240, 248, 255, 0.8); /* Lighter blue */

            /* Specific Imagine page colors for light mode */
            --imagine-step-card-bg: white;
            --imagine-step-card-text-color: #333;
            --imagine-step-card-desc-color: #666;
            --imagine-line-color: #00f5ff; /* Primary color */
            --imagine-dot-color: #ff006e; /* Secondary color */
            --imagine-stats-bg: rgba(0, 245, 255, 0.1); /* Primary color with opacity */
            --imagine-stats-border: rgba(0, 245, 255, 0.2);
            --imagine-stats-text-color: var(--color-dez-dark-text);
        }

        /* CSS variables definition for the dark theme */
        body.dark-mode {
            --bg-main: #1a1a2e; /* Solid dark background as in the example */
            --color-dez-dark-text: #e0e0e0; /* Light text for dark theme */
            --color-dez-gray-text: #B0B0B0; /* Lighter gray for secondary text in dark theme */
            --color-primary-var: #00f5ff; /* Cyan from Servicio.rtf */
            --color-secondary-var: #ff006e; /* Bright pink/Magenta from Servicio.rtf */
            --bg-card-light: rgba(35, 35, 35, 0.7);
            --border-card-light: rgba(70, 70, 70, 0.7);
            --shadow-color: rgba(0, 0, 0, 0.6);
            --navbar-bg: rgba(26, 26, 46, 0.2); /* Initial transparent background */
            --navbar-scrolled-bg: rgba(26, 26, 46, 0.8); /* More opaque when scrolled */
            --icon-lightbulb-color: #ffcc00; /* Color for lit lightbulb (dark) */
            --icon-lightbulb-shadow: 0 0 10px rgba(255, 204, 0, 0.8);
            --icon-palette-color: #B0B0B0; /* Light gray for palette in dark theme */
            --icon-palette-shadow: none;

            /* Hero background for dark theme (not directly used now that there's a global graphic) */
            --hero-bg-radial1: rgba(0, 224, 255, 0.05);
            --hero-bg-radial2: rgba(255, 102, 178, 0.05);
            --hero-bg-radial3: rgba(0, 224, 255, 0.03);

            /* Floating elements opacity for dark theme - EVEN MORE TRANSPARENCY */
            --floating-element-bg-opacity: 0.08; /* More transparent */
            --floating-element-border-opacity: 0.05; /* More transparent */

            /* Section background colors for dark theme (with transparency for blur effect) - INCREASED */
            --section-services-bg: rgba(30, 60, 90, 0.3); /* Opacity adjusted to 0.3 */
            --section-pricing-bg: rgba(26, 32, 44, 0.8); /* Opacity adjusted to 0.8 for more visibility */
            --section-about-us-bg: rgba(26, 32, 44, 0.8); /* Opacity adjusted to 0.8 for more visibility */
            --section-contact-bg: rgba(45, 55, 72, 0.3); /* Opacity adjusted to 0.3 */
            --section-footer-bg: rgba(26, 32, 44, 0.3); /* Opacity adjusted to 0.3 */

            /* RGB values for rgba() in floating elements (updated for dark mode) */
            --color-primary-var-rgb: 0, 245, 255; /* RGB of #00f5ff */
            --color-secondary-var-rgb: 255, 0, 110; /* RGB of #ff006e */
            --border-card-light-rgb: 70, 70, 70;

            /* Specific colors for Contact cards (Dark Mode) */
            --contact-instagram-card-bg: rgba(60, 40, 40, 0.8);
            --contact-whatsapp-card-bg: rgba(40, 60, 40, 0.8);
            --contact-email-card-bg: rgba(40, 40, 60, 0.8);

            /* Specific Imagine page colors for dark mode */
            --imagine-step-card-bg: rgba(35, 35, 35, 0.9);
            --imagine-step-card-text-color: #e0e0e0;
            --imagine-step-card-desc-color: #B0B0B0;
            --imagine-line-color: #00f5ff; /* Primary color */
            --imagine-dot-color: #ff006e; /* Secondary color */
            --imagine-stats-bg: rgba(0, 245, 255, 0.15); /* Primary color with opacity */
            --imagine-stats-border: rgba(0, 245, 255, 0.3);
            --imagine-stats-text-color: #e0e0e0;
        }

        /* CSS variables definition for the ELECTRIC NEON theme */
        body.neon-mode {
            --bg-main: linear-gradient(135deg, #001A1A 0%, #002A2A 50%, #003A3A 100%); /* Very dark green/blue background */
            --color-dez-dark-text: #00FF00; /* Neon Green for main text */
            --color-dez-gray-text: #FF8C00; /* Electric Orange for secondary text */
            --color-primary-var: #00FF00; /* Neon Green */
            --color-secondary-var: #FF8C00; /* Electric Orange */
            --bg-card-light: rgba(0, 30, 30, 0.7); /* Dark cards with green tint */
            --border-card-light: rgba(0, 80, 80, 0.7);
            --shadow-color: rgba(0, 0, 0, 0.8);
            --navbar-bg: rgba(0, 10, 10, 0.2); /* Initial transparent background */
            --navbar-scrolled-bg: rgba(0, 20, 20, 0.8); /* More opaque when scrolled */
            --icon-lightbulb-color: #00FF00; /* Neon Green for lightbulb */
            --icon-lightbulb-shadow: 0 0 10px #00FF00;
            --icon-palette-color: #FF8C00; /* Orange for palette in neon theme */
            --icon-palette-shadow: 0 0 10px #FF8C00;

            /* Hero background for neon theme */
            --hero-bg-radial1: rgba(0, 255, 0, 0.1);
            --hero-bg-radial2: rgba(255, 140, 0, 0.1);
            --hero-bg-radial3: rgba(0, 255, 0, 0.05);

            /* Floating elements opacity for neon theme - EVEN MORE TRANSPARENCY */
            --floating-element-bg-opacity: 0.12; /* More transparent */
            --floating-element-border-opacity: 0.08; /* More transparent */

            /* Section background colors for Neon theme (with transparency for blur effect) - INCREASED */
            --section-services-bg: rgba(0, 40, 80, 0.2); /* Opacity adjusted to 0.2 */
            --section-pricing-bg: rgba(0, 50, 50, 0.7); /* Opacity adjusted to 0.7 for more visibility */
            --section-about-us-bg: rgba(0, 50, 50, 0.7); /* Opacity adjusted to 0.7 for more visibility */
            --section-contact-bg: rgba(0, 40, 40, 0.2); /* Opacity adjusted to 0.2 */
            --section-footer-bg: rgba(0, 50, 50, 0.2); /* Opacity adjusted to 0.2 */

            /* RGB values for rgba() in floating elements */
            --color-primary-var-rgb: 0, 255, 0;
            --color-secondary-var-rgb: 255, 140, 0;
            --border-card-light-rgb: 0, 80, 80;

            /* Specific colors for Contact cards (Neon Mode) */
            --contact-instagram-card-bg: rgba(60, 0, 60, 0.8);
            --contact-whatsapp-card-bg: rgba(0, 60, 60, 0.8);
            --contact-email-card-bg: rgba(60, 60, 0, 0.8);

            /* Specific Imagine page colors for neon mode */
            --imagine-step-card-bg: rgba(0, 30, 30, 0.9);
            --imagine-step-card-text-color: #00FF00;
            --imagine-step-card-desc-color: #FF8C00;
            --imagine-line-color: #00FF00; /* Neon Green */
            --imagine-dot-color: #FF8C00; /* Neon Orange */
            --imagine-stats-bg: rgba(0, 255, 0, 0.15); /* Neon Green with opacity */
            --imagine-stats-border: rgba(0, 255, 0, 0.3);
            --imagine-stats-text-color: #00FF00;
        }

        /* Applying CSS variables */
        body {
            font-family: 'Arial', sans-serif;
            background: var(--bg-main); /* The main theme gradient */
            color: var(--color-dez-dark-text); /* Use dynamic variable for body text color */
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease; /* Transition for theme change */
            min-height: 100vh; /* Ensure body is at least viewport height */
            display: flex; /* To center the main card */
            flex-direction: column; /* To stack content vertically */
            align-items: center; /* Center the card horizontally */
            justify-content: center; /* Center the card vertically if content is short */
        }

        /* Global container for floating elements */
        .floating-elements {
            position: fixed; /* Fixed in the viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Behind all content */
            pointer-events: none; /* Does not interfere with clicks or interactions */
            overflow: hidden; /* Ensures elements do not overflow the viewport */
        }

        /* Styles and animations for individual floating elements */
        .floating-element {
            background: linear-gradient(45deg,
                rgba(var(--color-primary-var-rgb), var(--floating-element-bg-opacity)),
                rgba(var(--color-secondary-var-rgb), var(--floating-element-bg-opacity))
            );
            backdrop-filter: blur(8px);
            border: 1px solid rgba(var(--border-card-light-rgb), var(--floating-element-border-opacity));
            animation: floatMove 40s linear infinite; /* Movement and rotation animation - INCREASED DURATION */
            position: absolute; /* Absolutely positioned within .floating-elements */
            display: flex; /* To center content (icon) */
            align-items: center; /* To center content (icon) */
            justify-content: center; /* To center content (icon) */
        }

        /* New animated background graphic for dark mode */
        .dark-mode-animated-graphic {
            position: fixed;
            bottom: -10%; /* Position similar to example */
            left: -10%; /* Position similar to example */
            width: 600px; /* Graphic size */
            height: 600px; /* Graphic size */
            background: radial-gradient(circle at 30% 70%, rgba(var(--color-primary-var-rgb), 0.3), transparent 70%); /* Radial gradient with primary color */
            border-radius: 50%; /* Circular shape */
            filter: blur(80px); /* Soft glow effect */
            z-index: -2; /* Behind existing floating elements */
            animation: slideLight 10s infinite alternate ease-in-out; /* Slide animation */
            pointer-events: none; /* Does not interfere with clicks */
        }

        /* General animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* New animation for Hero text */
        @keyframes fade-in-slide-up {
            0% {
                opacity: 0;
                transform: translateY(20px);
                filter: blur(5px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
                filter: blur(0);
            }
        }

        /* Light slide animation (copied from example) */
        @keyframes slideLight {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(100%); /* Moves the graphic to the right */
            }
        }

        /* End-to-end movement animation */
        @keyframes floatMove {
            0% { transform: translateY(0px) translateX(0px) rotate(0deg); }
            25% { transform: translateY(-20px) translateX(100vw) rotate(90deg); } /* Moves to the right */
            50% { transform: translateY(0px) translateX(0px) rotate(180deg); }
            75% { transform: translateY(20px) translateX(-100vw) rotate(270deg); } /* Moves to the left */
            100% { transform: translateY(0px) translateX(0px) rotate(360deg); }
        }

        /* Custom gradient for text - Webkit specific */
        .text-gradient {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }

        /* Styles for text lighting animations (titles) */
        .animated-title {
            transition: filter 0.3s ease-in-out;
        }
        /* Removed elegant hover animation for Hero title */
        .hero h1 {
            /* Ensure transition applies to properties that will change on hover */
            transition: none; /* Remove hover transitions */
        }
        .hero h1:hover {
            color: inherit; /* Revert to default color */
            filter: none; /* Remove glow filter */
            text-shadow: none; /* Remove text shadow */
        }

        /* Styles for card lighting animations */
        .animated-card {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out, border-color 0.3s ease-in-out;
            background-color: var(--bg-card-light);
            border-color: var(--border-card-light);
            box-shadow: 0 4px 6px -1px var(--shadow-color), 0 2px 4px -2px var(--shadow-color); /* Base shadow */
        }
        .animated-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(var(--color-primary-var-rgb), 0.3); /* Neon glow using primary color */
        }

        /* Specific styles for the navbar */
        .navbar {
            background-color: var(--navbar-bg); /* Initial transparent background */
            border-color: var(--border-card-light);
            border-radius: 1.5rem; /* rounded-3xl */
            padding: 1.25rem 2.5rem; /* py-5 px-10 */
            position: fixed; /* Fixed to viewport */
            top: 0; /* Stuck to the top */
            left: 50%; /* Center the navbar */
            transform: translateX(-50%); /* Adjustment to center it */
            width: calc(100% - 4rem); /* Main card width - 2*p-8 */
            max-width: calc(1280px - 4rem); /* Max-width of the main card - 2*p-8 */
            z-index: 50;
            transition: background-color 0.3s ease, backdrop-filter 0.3s ease;
            backdrop-filter: blur(5px); /* Light initial blur */
        }
        .navbar.scrolled {
            background-color: var(--navbar-scrolled-bg); /* More opaque when scrolled */
            backdrop-filter: blur(15px); /* More blur when scrolled */
        }
        .navbar:hover {
            background-color: rgba(var(--border-card-light-rgb), 0.9); /* Almost opaque on hover */
            backdrop-filter: blur(5px); /* Less blur on hover */
        }


        /* Styles for the lightbulb icon */
        .lightbulb-icon {
            color: var(--icon-lightbulb-color);
            text-shadow: var(--icon-lightbulb-shadow);
            transition: color 0.3s ease, text-shadow 0.3s ease;
            cursor: pointer;
            margin-left: 1.5rem; /* Space to the left of navigation links */
        }

        /* Styles for the color palette icon */
        .palette-icon {
            color: var(--icon-palette-color);
            text-shadow: var(--icon-palette-shadow);
            transition: color 0.3s ease, text-shadow 0.3s ease;
            cursor: pointer;
            margin-left: 1rem; /* Space between lightbulb and palette */
        }

        /* Styles for the language icon (emoji) */
        .language-icon {
            font-size: 1.8rem; /* Emoji size */
            cursor: pointer;
            margin-left: 1rem; /* Space between palette and globe */
            transition: transform 0.2s ease;
        }

        .language-icon:hover {
            transform: scale(1.1); /* Slight scale effect on hover */
        }


        /* Styles for sections with background transition and BLUR */
        .section-transition {
            transition: background-color 0.5s ease;
            backdrop-filter: blur(10px); /* Blur effect */
            border-radius: 1.5rem; /* rounded-3xl */
            margin-bottom: 2rem; /* Space between sections */
        }
        /* Adjustments for the main card's top padding to accommodate the fixed navbar */
        .main-page-card {
            padding-top: 8rem; /* Adjust this value according to your navbar height + desired margin */
        }

        /* New style for text with hover glow animation */
        .luminous-text-hover {
            font-family: 'Playfair Display', serif; /* Apply new typography */
            font-style: italic; /* Make text italic */
            transition: text-shadow 0.3s ease-in-out, filter 0.3s ease-in-out;
            font-weight: normal; /* To make letters thinner */
        }
        .luminous-text-hover:hover {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.6); /* Silver glow effect */
            filter: brightness(1.2); /* Increase brightness */
        }

        /* Styles for Contact cards */
        .contact-instagram-card { background-color: var(--contact-instagram-card-bg); }
        .contact-whatsapp-card { background-color: var(--contact-whatsapp-card-bg); }
        .contact-email-card { background-color: var(--contact-email-card-bg); }

        /* Styles for DetailedServicesPage */
        .detailed-services-page {
            max-width: 1400px;
            margin: 0 auto;
            padding: 50px 20px;
            background-color: transparent; /* Main body background is handled by the App */
        }

        .detailed-services-header {
            text-align: center;
            margin-bottom: 10px; /* Reduced from 30px */
        }

        .detailed-services-title {
            font-size: 3rem; /* text-5xl */
            font-weight: 900; /* font-extrabold */
            margin-bottom: 5px; /* Reduced from 20px */
            background: linear-gradient(135deg, var(--color-dez-dark-text) 0%, var(--color-primary-var) 50%, var(--color-secondary-var) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 0; /* Ensure title is at the very top */
        }

        .detailed-services-subtitle {
            font-size: 1.2rem; /* text-xl */
            color: var(--color-dez-gray-text);
            line-height: 1.6;
            margin-top: 0; /* Ensure no top margin */
            margin-bottom: 0; /* Ensure no bottom margin */
        }

        .filter-container { /* Updated class name */
            text-align: center;
            margin-top: 10px; /* Moved up from 20px */
            margin-bottom: 10px; /* Reduced from 20px */
        }

        .filter-btn { /* Updated class name */
            background-color: rgba(var(--border-card-light-rgb), 0.7); /* Use dez-card-light-border or a darker shade of the card background */
            color: var(--color-dez-dark-text);
            border: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: linear-gradient(90deg, var(--color-primary-var), var(--color-secondary-var));
            color: white; /* Text color for active/hover state */
            transform: translateY(-3px);
        }

        .services-grid { /* Updated class name */
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Smaller cards */
            gap: 20px; /* Even more reduced spacing */
            padding: 0 20px;
            margin-top: 10px; /* Adjusted to be closer to filter buttons */
        }

        .service-card { /* Updated class name */
            background-color: var(--bg-card-light); /* Use theme card background */
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow-color);
            text-align: center;
            padding: 15px; /* Reduced from 20px */
            opacity: 0; /* Initial state for animation */
            transform: translateY(20px); /* Initial state for animation */
            transition: transform 0.5s ease, opacity 0.5s ease, box-shadow 0.3s ease; /* Ensure transition for opacity and transform */
            border: 1px solid var(--border-card-light); /* Use theme border */
            position: relative; /* Needed for ::before pseudo-element */
            overflow: hidden; /* Ensures flash stays within bounds */
            display: flex; /* Added flex for vertical alignment */
            flex-direction: column; /* Stack content vertically */
            flex-grow: 1; /* Allow content to grow and fill space */
            justify-content: space-between; /* Push price and button to bottom */
        }

        .service-card.visible { /* Class added by IntersectionObserver */
            opacity: 1;
            transform: translateY(0);
        }

        .service-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(var(--color-primary-var-rgb), 0.3); /* Neon glow using primary color */
        }

        /* Blue flash animation */
        .service-card::before { /* Updated class name */
            content: '';
            position: absolute;
            top: 0;
            left: -75%; /* Starts off-screen to the left */
            width: 50%;
            height: 100%;
            background: rgba(0, 245, 255, 0.05); /* More translucent blue flash */
            filter: blur(2px); /* Added blur for a more subtle effect */
            transform: skewX(-20deg); /* Skew the flash */
            transition: none; /* No default transition */
            z-index: 1; /* Ensures it's above card content but below hover transform */
        }

        .service-card:hover::before { /* Updated class name */
            animation: flash-animation 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; /* Play animation once on hover */
        }

        @keyframes flash-animation {
            0% { left: -75%; }
            100% { left: 125%; }
        }

        .service-visual {
            margin-bottom: 10px; /* Reduced from 15px */
        }

        .service-icon {
            font-size: 2.5rem; /* Reduced from 3rem */
            position: relative; /* Ensures icon is above flash */
            z-index: 2;
        }

        .service-content {
            position: relative; /* Ensures content is above flash */
            z-index: 2;
            display: flex; /* Added flex for vertical alignment */
            flex-direction: column; /* Stack content vertically */
            flex-grow: 1; /* Allow content to grow and fill space */
            justify-content: space-between; /* Push price and button to bottom */
        }

        .service-description-group { /* New class to group description and details */
            flex-grow: 1; /* Allow this group to take available space */
            margin-bottom: 5px; /* Reduced from 10px */
        }

        .service-name { /* Updated class name */
            font-size: 1.2rem; /* Reduced from 1.4rem */
            font-weight: 700; /* font-bold */
            margin-bottom: 4px; /* Reduced from 6px */
            color: var(--color-dez-dark-text);
            text-align: center; /* Added this to explicitly center */
        }

        .service-description { /* Updated class name */
            font-size: 0.8rem; /* Reduced from 0.85rem */
            color: var(--color-dez-gray-text);
            line-height: 1.3; /* Adjusted line height */
            margin-bottom: 4px; /* Reduced from 6px */
            font-style: italic;
        }

        .service-details {
            font-size: 0.7rem;
            color: var(--color-dez-gray-text);
            opacity: 0.8;
            margin-bottom: 8px;
            font-style: italic;
        }

        .service-price {
            display: block;
            color: var(--color-dez-dark-text);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
            background: none;
            padding: 0;
        }

        .service-btn {
            display: inline-block;
            background: linear-gradient(90deg, var(--color-primary-var), var(--color-secondary-var));
            color: #fff;
            padding: 8px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s ease, box-shadow 0.3s ease;
            font-size: 0.9rem;
            border: none;
            cursor: pointer;
            margin-top: 5px;
        }

        .service-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(var(--color-primary-var-rgb), 0.4);
        }

        .category-header {
            grid-column: 1 / -1;
            font-size: 2.2rem;
            font-weight: 800;
            text-align: center;
            margin-top: 15px; /* Reduced from 30px */
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--color-primary-var) 0%, var(--color-secondary-var) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1px;
        }

        /* Styles for ImaginePage */
        .imagine-page {
            max-width: 1200px; /* Increased max width for better design */
            margin: 0 auto;
            padding: 50px 20px;
            background-color: transparent;
            position: relative;
        }
        /* Hero section for ImaginePage (reused from provided code) */
        .imagine-page .hero-section {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--color-dez-dark-text); /* Use theme text color */
        }
        .imagine-page .hero-section h1 {
            font-size: 3.5rem;
            font-weight: 300;
            margin-bottom: 1rem;
            opacity: 0;
            animation: fadeInUp 1s ease forwards;
            background: linear-gradient(135deg, var(--color-dez-dark-text) 0%, var(--color-primary-var) 50%, var(--color-secondary-var) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .imagine-page .hero-section p {
            font-size: 1.2rem;
            opacity: 0.9;
            opacity: 0;
            animation: fadeInUp 1s ease 0.3s forwards;
            color: var(--color-dez-gray-text);
        }

        /* Main container for Imagine steps */
        .imagine-process-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 columns */
            gap: 40px 80px; /* Vertical and horizontal spacing */
            position: relative;
            padding: 40px;
            margin: 0 auto;
            max-width: 900px; /* Adjust max width of the grid */
            z-index: 1; /* Ensure grid is above background */
        }

        /* Connection lines for ImaginePage */
        .imagine-connection-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; /* Behind cards */
            pointer-events: none; /* Does not interfere with mouse */
            overflow: hidden; /* Ensures lines do not overflow */
        }

        .imagine-connection-lines svg {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .imagine-connection-lines path {
            stroke: var(--imagine-line-color);
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 10, 8;
            animation: drawPath 3s linear infinite;
            filter: drop-shadow(0 0 5px rgba(var(--color-primary-var-rgb), 0.5));
            opacity: 0.7;
        }

        @keyframes drawPath {
            to {
                stroke-dashoffset: -100; /* Continue animation */
            }
        }


        /* Circles with icons at card corners */
        .imagine-step-icon-circle {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: var(--color-secondary-var);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 0 15px rgba(var(--color-secondary-var-rgb), 0.6);
            z-index: 3; /* Ensures it's above the card */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .imagine-step-card:hover .imagine-step-icon-circle {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(var(--color-secondary-var-rgb), 0.8);
        }

        /* Specific positioning of icon circles */
        /* Adjusted positioning to be more central on the connecting side */
        .imagine-step-card:nth-child(1) { /* Card 1 (top-left) */
            grid-column: 1 / 2;
            grid-row: 1 / 2;
        }
        .imagine-step-card:nth-child(1) .imagine-step-icon-circle { top: 50%; right: 0; transform: translate(50%, -50%); }

        .imagine-step-card:nth-child(2) { /* Card 2 (top-right) */
            grid-column: 2 / 3;
            grid-row: 1 / 2;
        }
        .imagine-step-card:nth-child(2) .imagine-step-icon-circle { top: 50%; left: 0; transform: translate(-50%, -50%); }

        .imagine-step-card:nth-child(3) { /* Card 3 (bottom-left) */
            grid-column: 1 / 2;
            grid-row: 2 / 3;
        }
        .imagine-step-card:nth-child(3) .imagine-step-icon-circle { top: 50%; right: 0; transform: translate(50%, -50%); }

        .imagine-step-card:nth-child(4) { /* Card 4 (bottom-right) */
            grid-column: 2 / 3;
            grid-row: 2 / 3;
        }
        .imagine-step-card:nth-child(4) .imagine-step-icon-circle { top: 50%; left: 0; transform: translate(-50%, -50%); }


        /* Step card styles */
        .imagine-step-card {
            background: var(--imagine-step-card-bg);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px var(--shadow-color);
            position: relative;
            overflow: hidden;
            transform: scale(0.95); /* Slightly smaller */
            transition: all 0.5s ease;
            z-index: 2;
            border: 1px solid var(--border-card-light);
            text-align: center;
            padding-top: 1.5rem; /* Reduced top padding */
        }
        .imagine-step-card:hover {
            transform: scale(1);
            box-shadow: 0 30px 60px rgba(var(--color-primary-var-rgb), 0.3);
        }

        .imagine-step-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--imagine-step-card-text-color);
            margin-bottom: 1rem;
            margin-top: 0.5rem; /* Reduced top margin for title */
        }
        .imagine-step-description {
            color: var(--imagine-step-card-desc-color);
            line-height: 1.6;
            font-size: 1rem;
        }

        .stats-section {
            background: var(--imagine-stats-bg); /* Use theme variable */
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem 2rem;
            margin: 4rem auto; /* Centered with auto margins */
            text-align: center;
            color: var(--imagine-stats-text-color); /* Use theme variable */
            border: 1px solid var(--imagine-stats-border); /* Use theme variable */
            box-shadow: 0 10px 30px var(--shadow-color);
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        .stats-section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        .stat-item {
            padding: 1.5rem;
            border-radius: 15px;
            background: rgba(var(--color-primary-var-rgb), 0.1); /* Use primary color with opacity */
            border: 1px solid rgba(var(--color-primary-var-rgb), 0.2);
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            display: block;
            margin-bottom: 0.5rem;
        }

        /* Styles for OrderPage and ProcessedPage */
        .order-page, .processed-page, .admin-page {
            padding: 80px 50px 80px; /* Reduced top padding from 120px to 80px */
            max-width: 800px;
            margin: 0 auto;
            color: var(--color-dez-dark-text); /* Use theme text color */
        }

        .order-page .order-header, .processed-page .order-header, .admin-page .admin-header {
            text-align: center;
            margin-bottom: 40px; /* Reduced from 60px */
        }

        .order-page .order-title, .processed-page .order-title, .admin-page .admin-title {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--color-dez-dark-text) 0%, var(--color-primary-var) 50%, var(--color-secondary-var) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
            animation: fadeInUp 1s ease;
        }

        .order-page .order-subtitle, .processed-page .order-subtitle, .admin-page .admin-subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease 0.2s both;
            color: var(--color-dez-gray-text);
        }

        .order-page .form-container, .processed-page .form-container, .admin-page .admin-container {
            background: var(--bg-card-light);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-card-light);
            border-radius: 25px;
            padding: 50px;
            box-shadow: 0 20px 40px var(--shadow-color);
            animation: fadeInUp 1s ease 0.4s both;
            margin-top: 20px; /* Reduced margin-top for ProcessedPage form container */
        }

        .order-page .form-group, .processed-page .form-group, .admin-page .form-group {
            margin-bottom: 30px;
        }

        .order-page .form-label, .processed-page .form-label, .admin-page .form-label {
            display: block;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--color-primary-var);
            text-align: center;
        }

        .order-page .form-input,
        .order-page .form-select,
        .order-page .form-textarea,
        .processed-page .form-input,
        .processed-page .form-select,
        .processed-page .form-textarea,
        .admin-page .form-input,
        .admin-page .form-select,
        .admin-page .form-textarea {
            width: 100%;
            padding: 15px 20px;
            background: rgba(var(--border-card-light-rgb), 0.3); /* Use border color with opacity */
            border: 1px solid var(--border-card-light);
            border-radius: 15px;
            color: var(--color-dez-dark-text);
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        /* Specific style for inputs in ServiceDetailModal */
        .service-detail-modal-content .form-input.custom-input {
            background-color: black;
            color: white;
            width: 80px; /* Make it smaller */
            padding: 8px 12px; /* Adjust padding */
            border-radius: 8px;
            border: 1px solid #333;
            text-align: center;
        }


        .order-page .form-input:focus,
        .order-page .form-select:focus,
        .order-page .form-textarea:focus,
        .processed-page .form-input:focus,
        .processed-page .form-select:focus,
        .processed-page .form-textarea:focus,
        .admin-page .form-input:focus,
        .admin-page .form-select:focus,
        .admin-page .form-textarea:focus {
            outline: none;
            border-color: var(--color-primary-var);
            background: rgba(var(--border-card-light-rgb), 0.5);
            box-shadow: 0 0 20px rgba(var(--color-primary-var-rgb), 0.3);
        }

        .order-page .form-input::placeholder,
        .order-page .form-textarea::placeholder,
        .processed-page .form-input::placeholder,
        .processed-page .form-textarea::placeholder,
        .admin-page .form-input::placeholder,
        .admin-page .form-textarea::placeholder {
            color: var(--color-dez-gray-text);
        }

        .order-page .calendar-widget, .processed-page .calendar-widget, .admin-page .calendar-widget {
            background: var(--bg-card-light);
            border: 1px solid var(--border-card-light);
            border-radius: 15px;
            padding: 20px;
            color: var(--color-dez-dark-text);
            max-width: 320px;
            margin: 0 auto;
            font-family: Arial, sans-serif;
            box-shadow: 0 10px 30px var(--shadow-color);
        }

        .order-page .calendar-header, .processed-page .calendar-header, .admin-page .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(var(--border-card-light-rgb), 0.5);
        }

        .order-page .calendar-month, .processed-page .calendar-month, .admin-page .calendar-month {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--color-dez-dark-text);
        }

        .order-page .calendar-year, .processed-page .calendar-year, .admin-page .calendar-year {
            color: var(--color-secondary-var);
            font-weight: bold;
        }

        .order-page .calendar-nav, .processed-page .calendar-nav, .admin-page .calendar-nav {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            color: var(--color-dez-dark-text);
        }

        .order-page .calendar-grid, .processed-page .calendar-grid, .admin-page .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            text-align: center;
        }

        .order-page .calendar-day-header, .processed-page .calendar-day-header, .admin-page .calendar-day-header {
            font-weight: bold;
            color: var(--color-dez-gray-text);
            padding-bottom: 8px;
            font-size: 0.85rem;
        }

        .order-page .calendar-day, .processed-page .calendar-day, .admin-page .calendar-day {
            padding: 8px;
            text-align: center;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .order-page .calendar-day:hover:not(.disabled):not(.selected), .processed-page .calendar-day:hover:not(.disabled):not(.selected), .admin-page .calendar-day:hover:not(.disabled):not(.selected) {
            background: rgba(var(--color-primary-var-rgb), 0.2);
        }

        .order-page .calendar-day.selected, .processed-page .calendar-day.selected, .admin-page .calendar-day.selected {
            background: var(--color-primary-var);
            color: white;
        }

        .order-page .calendar-day.current-day, .processed-page .calendar-day.current-day, .admin-page .calendar-day.current-day {
            background: var(--color-secondary-var);
            color: white;
            font-weight: bold;
        }

        .order-page .calendar-day.other-month, .processed-page .calendar-day.other-month {
            color: var(--color-dez-gray-text);
            opacity: 0.5;
            cursor: default;
        }

        .order-page .calendar-day.disabled, .processed-page .calendar-day.disabled, .admin-page .calendar-day.disabled {
            color: var(--color-dez-gray-text);
            opacity: 0.3;
            cursor: not-allowed;
            background: rgba(var(--border-card-light-rgb), 0.1);
        }

        .order-page .phone-dialer, .processed-page .phone-dialer, .admin-page .phone-dialer {
            background: var(--bg-card-light);
            border: 1px solid var(--border-card-light);
            border-radius: 20px;
            padding: 20px;
            color: var(--color-dez-dark-text);
            max-width: 280px;
            margin: 0 auto;
            font-family: Arial, sans-serif;
            box-shadow: 0 10px 30px var(--shadow-color);
        }

        .order-page .phone-display, .processed-page .phone-display, .admin-page .phone-display {
            background: rgba(var(--color-dez-dark-text-rgb), 0.8);
            color: var(--color-primary-var);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 20px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: auto;
        }

        .order-page .phone-keypad, .processed-page .phone-keypad, .admin-page .phone-keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .order-page .phone-key, .processed-page .phone-key, .admin-page .phone-key {
            background: rgba(var(--border-card-light-rgb), 0.7);
            border: 1px solid var(--border-card-light);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.2s ease;
            margin: 0 auto;
            color: var(--color-dez-dark-text);
        }

        .order-page .phone-key:hover, .processed-page .phone-key:hover, .admin-page .phone-key:hover {
            background: var(--color-primary-var);
            color: white;
            transform: scale(1.1);
        }

        .order-page .phone-key.wide, .processed-page .phone-key.wide, .admin-page .phone-key.wide {
            grid-column: span 2;
            border-radius: 25px;
            width: 110px;
        }

        .order-page .phone-actions, .processed-page .phone-actions, .admin-page .phone-actions {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            gap: 20px;
        }

        .order-page .phone-action, .processed-page .phone-action, .admin-page .phone-action {
            background: var(--color-secondary-var);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            color: white;
            transition: all 0.2s ease;
        }
        .order-page .phone-action.clear, .processed-page .phone-action.clear, .admin-page .phone-action.clear {
            font-size: 1.8rem; /* Emoji size */
        }

        .order-page .phone-action:hover, .processed-page .phone-action:hover {
            transform: scale(1.1);
        }

        .order-page .submit-button, .processed-page .submit-button, .admin-page .submit-button {
            width: 100%;
            padding: 20px;
            background: linear-gradient(45deg, var(--color-primary-var), var(--color-secondary-var));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(var(--color-primary-var-rgb), 0.3);
            margin-top: 30px;
        }

        .order-page .submit-button:hover, .processed-page .submit-button:hover, .admin-page .submit-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(var(--color-primary-var-rgb), 0.5);
        }

        .order-page .modal-overlay, .processed-page .modal-overlay, .admin-page .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .order-page .modal-overlay.show, .processed-page .modal-overlay.show, .admin-page .modal-overlay.show {
            display: flex;
            opacity: 1;
            visibility: visible;
        }

        .order-page .modal-content, .processed-page .modal-content, .admin-page .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 1px solid rgba(var(--color-primary-var-rgb), 0.2);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            color: #ffffff;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 50px rgba(var(--color-primary-var-rgb), 0.5);
            transform: translateY(-50px);
            transition: transform 0.3s ease;
        }

        .order-page .modal-overlay.show .modal-content, .processed-page .modal-overlay.show .modal-content, .admin-page .modal-overlay.show .modal-content {
            transform: translateY(0);
        }

        .order-page .modal-title, .processed-page .modal-title, .admin-page .modal-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--color-primary-var);
            margin-bottom: 20px;
        }

        .order-page .modal-details, .processed-page .modal-details, .admin-page .modal-details {
            font-size: 1rem;
            margin-bottom: 30px;
            line-height: 1.6;
            color: rgba(255,255,255,0.9);
        }

        .order-page .modal-details strong, .processed-page .modal-details strong, .admin-page .modal-details strong {
            color: var(--color-secondary-var);
        }

        .order-page .modal-close-button, .processed-page .modal-close-button, .admin-page .modal-close-button {
            background: linear-gradient(45deg, var(--color-primary-var), var(--color-secondary-var));
            color: white;
            border: none;
            border-radius: 30px;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .order-page .modal-close-button:hover, .processed-page .modal-close-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(var(--color-primary-var-rgb), 0.5);
        }

        .order-page .payment-info, .processed-page .payment-info {
            background: rgba(var(--border-card-light-rgb), 0.1);
            border: 1px solid var(--border-card-light);
            border-radius: 15px;
            padding: 25px;
            margin-top: 40px;
            text-align: center;
        }

        .order-page .payment-methods, .processed-page .payment-methods {
            display: grid; /* Use grid for consistent sizing */
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Minmax adjusted to make cards smaller */
            gap: 10px; /* Reduced spacing */
            margin-top: 20px;
            justify-content: center; /* Center items in the grid */
        }

        .order-page .payment-method-box, .processed-page .payment-method-box {
            background: rgba(var(--border-card-light-rgb), 0.2);
            border: 1px solid rgba(var(--border-card-light-rgb), 0.4);
            border-radius: 18px;
            padding: 10px; /* Reduced padding */
            box-shadow: 0 5px 20px var(--shadow-color);
            transition: all 0.3s ease;
            text-align: center;
            display: flex; /* Use flexbox for internal content alignment */
            flex-direction: column;
            justify-content: flex-start; /* Align content to the start */
            height: 100%; /* Ensure same height */
            min-height: 120px; /* Reduced min height */
        }

        .order-page .payment-method-box:hover, .processed-page .payment-method-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(var(--color-primary-var-rgb), 0.2);
        }

        .order-page .method-title, .processed-page .method-title {
            font-size: 1.1rem; /* Reduced font size */
            font-weight: 700;
            margin-bottom: 2px; /* Reduced bottom margin */
            color: var(--color-dez-dark-text);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px; /* Reduced spacing */
        }

        .order-page .paypal-gradient, .processed-page .paypal-gradient {
            background: linear-gradient(45deg, #003087, #009cde);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .order-page .zelle-gradient, .processed-page .zelle-gradient {
            background: linear-gradient(45deg, #ff9900, #ffcc00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .order-page .banreservas-title, .processed-page .banreservas-title {
            color: var(--color-dez-dark-text);
        }

        .order-page .bank-logo, .processed-page .bank-logo {
            height: 25px; /* Reduced height */
            width: auto;
            object-fit: contain;
            filter: drop-shadow(0 0 5px rgba(var(--color-primary-var-rgb), 0.3));
        }

        .order-page .method-detail, .processed-page .method-detail {
            font-size: 0.8rem; /* Reduced font size */
            color: var(--color-dez-gray-text);
            margin-bottom: 0px; /* Reduced bottom margin */
            line-height: 1.2; /* Tighter line height */
        }

        .order-page .detail-highlight, .processed-page .detail-highlight {
            color: var(--color-primary-var);
            font-weight: 600;
        }

        /* Time slot styles */
        .time-slots-container {
            margin-top: 20px;
            padding: 20px;
            background: var(--bg-card-light);
            border: 1px solid var(--border-card-light);
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--shadow-color);
            max-width: 320px; /* Matches calendar width */
            margin-left: auto;
            margin-right: auto;
        }

        .time-slots-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 columns for time slots */
            gap: 10px;
            text-align: center;
        }

        .time-slot-button {
            padding: 10px 5px;
            background: rgba(var(--border-card-light-rgb), 0.5);
            border: 1px solid var(--border-card-light);
            border-radius: 10px;
            color: var(--color-dez-dark-text);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .time-slot-button:hover:not(.selected):not(.disabled) {
            background: rgba(var(--color-primary-var-rgb), 0.2);
        }

        .time-slot-button.selected {
            background: var(--color-primary-var);
            color: white;
            font-weight: bold;
        }

        .time-slot-button.disabled {
            background-color: rgba(255, 0, 0, 0.2); /* Light red for unavailable hours */
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: rgba(255, 0, 0, 0.6);
            cursor: not-allowed;
            opacity: 0.6;
        }
        .time-slot-button.disabled:hover {
            background-color: rgba(255, 0, 0, 0.2); /* Does not change on hover if disabled */
        }


        /* Styles for the admin page */
        .admin-page {
            max-width: 900px; /* Wider for admin content */
        }
        .admin-page .admin-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .admin-page .admin-title {
            font-size: 3rem;
        }
        .admin-page .admin-subtitle {
            font-size: 1.1rem;
        }
        .admin-page .admin-container {
            padding: 40px;
        }

        /* Admin navigation tabs */
        .admin-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(var(--border-card-light-rgb), 0.1);
            border-radius: 15px;
            padding: 10px;
            gap: 10px;
        }

        .admin-nav-button {
            flex: 1;
            padding: 12px 20px;
            border-radius: 10px;
            background: transparent;
            color: var(--color-dez-gray-text);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: none;
        }

        .admin-nav-button:hover {
            background: rgba(var(--color-primary-var-rgb), 0.1);
            color: var(--color-primary-var);
        }

        .admin-nav-button.active {
            background: linear-gradient(45deg, var(--color-primary-var), var(--color-secondary-var));
            color: white;
            box-shadow: 0 5px 15px rgba(var(--color-primary-var-rgb), 0.3);
        }

        /* Admin section styles */
        .admin-section {
            background: rgba(var(--border-card-light-rgb), 0.1);
            border: 1px solid var(--border-card-light);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 5px 20px var(--shadow-color);
        }

        .admin-section-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-secondary-var);
            margin-bottom: 25px;
            text-align: center;
        }

        /* Order table styles */
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .orders-table th, .orders-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(var(--border-card-light-rgb), 0.3);
            color: var(--color-dez-dark-text);
        }

        .orders-table th {
            background-color: rgba(var(--color-primary-var-rgb), 0.1);
            font-weight: 600;
            color: var(--color-primary-var);
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .orders-table tbody tr:hover {
            background-color: rgba(var(--border-card-light-rgb), 0.05);
        }

        .orders-table td strong {
            color: var(--color-secondary-var);
        }

        /* Delete order button */
        .delete-order-btn {
            background-color: #dc3545; /* Red */
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .delete-order-btn:hover {
            background-color: #c82333;
            transform: translateY(-2px);
        }

        /* Order total */
        .orders-total {
            text-align: right;
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid var(--color-primary-var);
            color: var(--color-dez-dark-text);
        }
        .orders-total span {
            color: var(--color-secondary-var);
        }


        /* Calendar and save button for unavailable days */
        .admin-page .calendar-day.unavailable {
            background-color: rgba(255, 0, 0, 0.2); /* Light red for unavailable days */
            border: 1px solid rgba(255, 0, 0, 0.5);
            cursor: pointer;
        }
        .admin-page .calendar-day.unavailable:hover {
            background-color: rgba(255, 0, 0, 0.4);
        }
        .admin-page .calendar-day.selected.unavailable {
            background-color: rgba(255, 0, 0, 0.6); /* Darker red when selected as unavailable */
            color: white;
        }
        .admin-page .save-button { /* Generic save button style */
            margin-top: 20px;
            padding: 10px 20px;
            background: linear-gradient(45deg, var(--color-primary-var), var(--color-secondary-var));
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(var(--color-primary-var-rgb), 0.3);
            display: block; /* Make it a block element */
            margin-left: auto;
            margin-right: auto;
        }
        .admin-page .save-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(var(--color-primary-var-rgb), 0.5);
        }

        /* Specific price management styles */
        .price-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed rgba(var(--border-card-light-rgb), 0.2);
        }
        .price-item:last-child {
            border-bottom: none;
        }
        .price-item span {
            color: var(--color-dez-dark-text);
            font-weight: 500;
        }
        .price-item input {
            width: 100px; /* Fixed width for consistent size */
            text-align: right; /* Align text to the right */
            padding: 8px 12px;
            border-radius: 8px;
            background: rgba(var(--border-card-light-rgb), 0.3);
            border: 1px solid var(--border-card-light);
            color: var(--color-dez-dark-text);
        }

        /* Specific location management styles */
        .location-select {
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            padding: 12px 15px;
            border-radius: 10px;
            background: rgba(var(--border-card-light-rgb), 0.3);
            border: 1px solid var(--border-card-light);
            color: var(--color-dez-dark-text);
            font-size: 1rem;
            display: block; /* Center the select box */
        }

        /* Styles for ToastNotification */
        .toast-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 3000; /* Ensure it's above other elements */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toast-notification.show {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .toast-notification.success {
            background-color: rgba(40, 167, 69, 0.9); /* Green for success */
        }

        .toast-notification.error {
            background-color: rgba(220, 53, 69, 0.9); /* Red for error */
        }

        .toast-icon {
            font-size: 1.5rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .detailed-services-title {
                font-size: 2.5rem;
            }

            .filter-btn {
                margin: 5px;
                padding: 8px 15px;
            }

            .services-grid {
                grid-template-columns: 1fr;
            }

            .service-card {
                padding: 15px; /* Adjusted for mobile */
                min-height: 250px; /* Adjusted for mobile */
            }

            .category-header {
                font-size: 2rem;
            }

            /* Responsive adjustments for Imagine page */
            .imagine-page .hero-section h1 {
                font-size: 2.5rem;
            }
            /* Cards are now centered by default, no specific nth-child adjustments needed */
            .imagine-process-grid {
                grid-template-columns: 1fr; /* One column on mobile */
                padding: 20px;
            }
            .imagine-step-card {
                max-width: 90%;
                margin: 0 auto;
            }
            .imagine-connection-lines {
                display: none; /* Hide lines on mobile if they don't adapt well */
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }

            /* Responsive adjustments for order page */
            .order-page, .processed-page, .admin-page {
                padding: 100px 20px 60px;
            }
            .order-page .form-container, .processed-page .form-container, .admin-page .admin-container {
                padding: 30px 25px;
            }
            .order-page .order-title, .processed-page .order-title, .admin-page .order-title {
                font-size: 2.2rem;
            }
            .order-page .payment-methods, .processed-page .payment-methods {
                grid-template-columns: 1fr; /* Stack vertically on small screens */
                gap: 20px;
            }
            .order-page .payment-method-box, .processed-page .payment-method-box {
                max-width: 100%;
                padding: 20px;
            }
            .order-page .method-title, .processed-page .method-title {
                font-size: 1.2rem;
            }
            .order-page .bank-logo, .processed-page .bank-logo {
                height: 30px;
            }

            /* Responsive adjustments for admin page */
            .admin-nav {
                flex-direction: column;
            }
            .admin-nav-button {
                width: 100%;
            }
        }
        /* Responsive adjustment for payment methods on larger screens */
        @media (min-width: 769px) {
            .order-page .payment-methods, .processed-page .payment-methods {
                /* Reset to row for larger screens if previously stacked */
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Minmax adjusted to make cards smaller */
                justify-content: center;
                gap: 10px; /* Reduced spacing */
            }
        }

        /* ServiceDetailModal styles */
        .service-detail-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); /* Dark semi-transparent background */
            backdrop-filter: blur(8px); /* Blur effect */
            z-index: 1000; /* Above everything except toast notifications */
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .service-detail-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .service-detail-modal-content {
            background: var(--bg-card-light);
            border: 1px solid var(--border-card-light);
            border-radius: 20px;
            padding: 20px; /* Reduced padding for more compact look */
            width: 90%;
            max-width: 900px; /* Max width for the modal */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            gap: 15px; /* Reduced gap between sections */
            position: relative;
            transform: translateY(-50px);
            transition: transform 0.3s ease;
        }
        .service-detail-modal-overlay.show .service-detail-modal-content {
            transform: translateY(0);
        }

        .service-detail-modal-close-button {
            position: absolute;
            top: 10px; /* Adjusted from 15px */
            right: 10px; /* Adjusted from 15px */
            background: rgba(var(--border-card-light-rgb), 0.2); /* Subtle background */
            border: none;
            font-size: 2.2rem; /* Increased font size from 1.8rem */
            color: var(--color-dez-dark-text);
            cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease;
            width: 44px; /* Fixed width for larger click area */
            height: 44px; /* Fixed height for larger click area */
            display: flex; /* To center the X icon */
            align-items: center; /* To center the X icon */
            justify-content: center; /* To center the X icon */
            border-radius: 50%; /* Make it circular */
            padding: 0; /* Remove padding as width/height are fixed */
        }
        .service-detail-modal-close-button:hover {
            transform: scale(1.1);
            background-color: rgba(var(--color-secondary-var-rgb), 0.2); /* Highlight on hover */
        }

        .service-detail-modal-info {
            flex: 1; /* Takes available space */
            padding-right: 15px; /* Reduced space between info and carousel */
            color: var(--color-dez-dark-text);
        }

        .service-detail-modal-info h2 {
            font-size: 2.2rem; /* Slightly reduced font size */
            font-weight: bold;
            margin-bottom: 8px; /* Reduced margin */
            background: linear-gradient(135deg, var(--color-dez-dark-text) 0%, var(--color-primary-var) 50%, var(--color-secondary-var) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .service-detail-modal-info p {
            font-size: 0.95rem; /* Slightly reduced font size */
            color: var(--color-dez-gray-text);
            line-height: 1.5; /* Adjusted line height */
            margin-bottom: 10px; /* Reduced margin */
        }

        .service-detail-modal-info .price {
            font-size: 1.4rem; /* Slightly reduced font size */
            font-weight: 600;
            color: var(--color-primary-var);
            margin-top: 15px; /* Reduced margin */
        }

        .service-detail-carousel-container {
            flex: 1; /* Takes available space */
            display: flex;
            flex-direction: column; /* Stack media and dots vertically */
            align-items: center;
            justify-content: center;
            position: relative;
            min-height: 280px; /* Minimum height for the carousel */
        }

        .service-detail-carousel-item {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Ensure media fits without cropping */
            border-radius: 10px;
            display: none; /* Hidden by default */
        }
        .service-detail-carousel-item.active {
            display: block; /* Show active item */
        }

        /* Carousel dots */
        .carousel-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px; /* Space below media */
        }

        .carousel-dot {
            width: 10px;
            height: 10px;
            background-color: var(--color-dez-gray-text);
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .carousel-dot.active {
            background-color: var(--color-primary-var);
            transform: scale(1.2);
        }

        /* Responsive adjustments for modal */
        @media (min-width: 768px) {
            .service-detail-modal-content {
                flex-direction: row; /* Side-by-side on larger screens */
            }
            .service-detail-modal-info {
                padding-right: 15px;
            }
            .service-detail-carousel-container {
                min-height: 350px; /* Adjust height for larger screens */
            }
        }
        @media (max-width: 767px) {
            .service-detail-modal-content {
                flex-direction: column; /* Stack vertically on smaller screens */
                padding: 15px;
            }
            .service-detail-modal-info {
                padding-right: 0;
            }
            .service-detail-modal-info h2 {
                font-size: 1.8rem;
            }
            .service-detail-carousel-container {
                min-height: 200px; /* Adjust height for smaller screens */
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="toast-root"></div>
    <script type="text/babel">
        // Ensure React and ReactDOM are taken from the global 'window' object
        const { useState, useEffect, useRef, useCallback } = window.React;
        const ReactDOM = window.ReactDOM;

        // Helper function to format descriptions with line breaks
        const formatDescriptionWithBreaks = (text) => {
            if (!text) return '';
            // Replace period followed by space with period and <br />
            // Avoid adding <br /> if it's the last character or if it's already followed by <br />
            return text.replace(/\. (?![^<]*>)/g, '.<br />');
        };

        // Text object for multi-language support (currently only Spanish)
        const texts = {
            es: {
                dezgital: "Dezgital",
                navbar: {
                    services: "Servicios",
                    plans: "Planes",
                    aboutUs: "Nosotros", // Changed to "Nosotros"
                    contact: "Contacto",
                    imagine: "Imagina" // Reintroduced
                },
                hero: {
                    title: "Convierte tu Idea en Realidad",
                    exploreButton: "Explorar",
                    imagineButton: "Imagina" // Reintroduced
                },
                servicesSection: {
                    title: "Servicios",
                    webTitle: "Web",
                    webDescription: "Creamos sitios web cautivadores y responsivos, fusionando tecnología de vanguardia con un diseño impresionante.",
                    photographyTitle: "Fotografía",
                    photographyDescription: "Nuestra lente captura momentos con precisión artística, contando visualmente la historia única de tu marca.",
                    videographyTitle: "Videografía",
                    videographyDescription: "Producimos videos cinematográficos que resuenan emocionalmente y elevan el mensaje de tu marca."
                },
                pricingSection: {
                    title: "Planes de Creación de Contenido",
                    basicPlan: "Básico",
                    professionalPlan: "Profesional",
                    perMonth: "Por Mes",
                    basicWebsite: "Sitio Web Básico (5 páginas)",
                    responsiveDesign: "Diseño Responsivo",
                    seoOptimization: "Optimización SEO",
                    monthSupport: "Mes de Soporte",
                    advancedWebsite: "Sitio Web Avanzado + CMS",
                    photoSession: "Sesión de Fotos (4 horas)",
                    brandVideo: "Video de Marca (2 minutos)",
                    monthsSupport: "Meses de Soporte",
                    differentPlanQuestion: "¿Necesitas un plan diferente para tu negocio?",
                    createOwnPlan: "Crea Tu Propio Plan",
                    enterprisePlan: "Empresarial",
                    postQuantity: "Cantidad de posts:",
                    hasWebsite: "Página web:",
                    autoPosting: "Auto-Publicación:",
                    proceedButton: "Proceder"
                },
                aboutUsSection: {
                    title: "¿QUIÉNES SOMOS?",
                    introText: "Dezgital se especializa en fotografía, producción de videos, desarrollo de páginas web y creación de contenido para redes sociales.",
                    luminousPhrase: "Transformamos ideas en imágenes, historias y experiencias digitales que conectan con tu audiencia.",
                    founderTitle: "Fundador",
                    founderName: "Joshua Diaz",
                    founderDescription: "Ingeniero en sistemas, Fotógrafo y filmmaker.",
                    missionTitle: "Misión",
                    missionText: "Crear contenido visual de alto impacto que potencie la presencia de nuestros clientes.",
                    visionTitle: "Visión",
                    visionText: "Ser una empresa líder en creatividad digital, reconocida por su innovación y calidad en cada proyecto."
                },
                contactSection: {
                    title: "Ponte en Contacto",
                    introText: "¡Nos encantaría saber de ti! Contáctanos por tu método preferido.",
                    instagramTitle: "Instagram",
                    instagramDescription: "Síguenos para actualizaciones y contenido detrás de cámaras.",
                    whatsappTitle: "WhatsApp",
                    whatsappDescription: "Chatea con nosotros directamente para consultas rápidas.",
                    emailTitle: "Envíanos un Correo",
                    emailDescription: "Envíanos un correo electrónico para preguntas detalladas o propuestas.",
                    locationTitle: "Donde Estoy", // Changed from "Estoy aquí ahora"
                    locationDR: "Sabana Iglesia, Provincia de Santiago, República Dominicana", // Specific text for DR
                    locationUS: "Estados Unidos" // Specific text for US
                },
                footer: {
                    copyright: "© 2025 Dezgital. Creado con pasión para el futuro.",
                    adminLink: "Admin"
                },
                detailedServicesPage: {
                    backButton: "Volver al Inicio",
                    title: "Nuestros Servicios",
                    subtitle: "", // Updated text - now empty
                    filterButtons: {
                        all: "Todos",
                        photography: "Fotografía",
                        videos: "Videos",
                        software: "Software",
                        other: "Otros"
                    },
                    categoryHeaders: {
                        fotografia: "Fotografía",
                        videos: "Video",
                        software: "Software",
                        otros: "Otros"
                    },
                    selectButton: "Seleccionar"
                },
                serviceData: [
                    {
                        category: 'fotografia',
                        icon: 'fas fa-camera', // Icon added
                        title: 'Studio',
                        description: 'Sesión de 1 hora. Cambio de outfit. 10 fotos editadas.',
                        details: 'Estudio profesional con iluminación controlada.',
                        price: '$200',
                        priceKey: 'studio',
                        basePhotos: 10, // Base photos for customization
                        minPhotos: 5, // Minimum photos for customization
                        photoPriceIncrement: 10 // Price per extra/less photo
                    },
                    {
                        category: 'fotografia',
                        icon: 'fas fa-street-view', // Icon added
                        title: 'Street',
                        description: 'Fotografía urbana en locaciones exteriores.',
                        details: 'Seleccion personalizada del lugar.', // Updated detail
                        price: '$400',
                        priceKey: 'street',
                        basePhotos: 10,
                        minPhotos: 5,
                        photoPriceIncrement: 10
                    },
                    {
                        category: 'fotografia',
                        icon: 'fas fa-gem', // Icon added
                        title: 'Brand',
                        description: 'Ideas personalizadas. 5 fotos editadas.',
                        details: 'Fotografía corporativa y branding profesional.',
                        price: '$100',
                        priceKey: 'brand'
                    },
                    {
                        category: 'videos',
                        icon: 'fas fa-video', // Icon added
                        title: 'Video para Red Social',
                        description: '30 segundos de videos. Idea única. Edición creativa.',
                        details: 'Perfecto para Instagram, TikTok y Facebook.',
                        price: '$150',
                        priceKey: 'social_media_video',
                        baseDurationSeconds: 30, // Base duration in seconds
                        minDurationSeconds: 30, // Minimum duration in seconds
                        durationPriceIncrement: 50, // Price per 30 seconds
                        locationOption: true // Option to choose location
                    },
                    {
                        category: 'videos',
                        icon: 'fas fa-film', // Icon added
                        title: 'Comercial',
                        description: 'Video comercial para una marca. Guión original. Llamativo para la venta de un producto.',
                        details: 'Incluye pre-producción, grabación y post-producción.',
                        price: '$500', // Changed base price to $500
                        priceKey: 'commercial',
                        baseDurationSeconds: 30, // Assuming 30 seconds as base for commercial too
                        minDurationSeconds: 30,
                        durationPriceIncrement: 50,
                        locationOption: true
                    },
                    {
                        category: 'videos',
                        icon: 'fas fa-music', // Icon added
                        title: 'Video Musical',
                        description: 'Guión. Reclutarea y re edición.',
                        details: 'Producción completa para artistas y músicos.',
                        price: '$1500',
                        priceKey: 'music_video',
                        baseDurationSeconds: 30,
                        minDurationSeconds: 30,
                        durationPriceIncrement: 50,
                        locationOption: true
                    },
                    {
                        category: 'videos',
                        icon: 'fas fa-star', // Icon added
                        title: 'Video Musical Plus',
                        description: 'Guión. Storyboards. 2 Re-grabaciones. 3 Locaciones. Actrices.',
                        details: 'Producción premium con múltiples locaciones.',
                        price: '$2500',
                        priceKey: 'music_video_plus',
                        baseDurationSeconds: 30,
                        minDurationSeconds: 30,
                        durationPriceIncrement: 50,
                        locationOption: true
                    },
                    {
                        category: 'videos',
                        icon: 'fas fa-cut', // Icon added
                        title: 'Edición de Video',
                        description: 'Edición completa. Revisión y Corrección.',
                        details: 'Para material ya grabado que necesita post-producción.',
                        price: '$300',
                        priceKey: 'video_editing'
                    },
                    {
                        category: 'videos',
                        icon: 'fas fa-magic', // Icon added
                        title: 'VFX',
                        description: 'Efectos visuales para una escena.',
                        details: 'Efectos especiales y composición digital.',
                        price: '$70',
                        priceKey: 'vfx'
                    },
                    {
                        category: 'software',
                        icon: 'fas fa-globe', // Icon added
                        title: 'Página Web Informativa',
                        description: '30 segundos de videos. Idea única. Edición creativa.',
                        details: 'Sitio web responsivo con diseño moderno.',
                        price: '$1000',
                        priceKey: 'informative_website',
                        basePages: 10, // Base pages for customization
                        minPages: 1, // Minimum pages for customization
                        pagePriceIncrement: 50 // Price per extra/less page
                    },
                    {
                        category: 'software',
                        icon: 'fas fa-shopping-cart', // Icon added
                        title: 'Página Web de Comercio',
                        description: 'Plataforma completa de e-commerce con carrito de compras y procesamiento de pagos.',
                        details: 'Incluye gestión de inventario y panel administrativo.',
                        price: '$2500',
                        priceKey: 'e_commerce_website'
                    },
                    {
                        category: 'software',
                        icon: 'fas fa-mobile-alt', // Icon added
                        title: 'Aplicación Móvil',
                        description: 'Guión. Reajustes y desarrollo completo.',
                        details: 'App nativa para iOS y Android.',
                        price: '$2000',
                        priceKey: 'mobile_app'
                    },
                    {
                        category: 'software',
                        icon: 'fas fa-cogs', // Icon added
                        title: 'Sistema de Gestión para una Compañía',
                        description: 'Guión. Reajustes y personalización completa.',
                        details: 'ERP empresarial con módulos personalizados.',
                        price: '$5000',
                        priceKey: 'company_management_system'
                    },
                    {
                        category: 'otros',
                        icon: 'fas fa-id-card', // Icon added
                        title: 'Tarjeta de Presentación',
                        description: '30 segundos de videos. Idea única. Edición creativa.',
                        details: 'Diseño profesional para networking y presentación.',
                        price: '$1000',
                        priceKey: 'business_card'
                    },
                    {
                        category: 'otros',
                        icon: 'fas fa-paint-brush', // Icon added
                        title: 'Diseño',
                        description: 'Portada de álbum o disco musical. Animación Visualizer.',
                        details: 'Diseño gráfico creativo y animaciones personalizadas.',
                        price: '$200',
                        priceKey: 'design'
                    },
                    {
                        category: 'otros',
                        icon: 'fas fa-lightbulb', // Icon added
                        title: 'Logo',
                        description: 'Diseño de logo. 3 bocetos. Formatos Jpeg y PNG.',
                        details: 'Identidad visual profesional con múltiples opciones.',
                        price: '$120',
                        priceKey: 'logo'
                    },
                    {
                        category: 'otros',
                        icon: 'fas fa-brain', // Icon added
                        title: 'Conceptualización',
                        description: 'Diseños y campañas para álbum musical o videos.',
                        details: 'Desarrollo creativo integral para proyectos artísticos.',
                        price: '$300',
                        priceKey: 'conceptualization'
                    }
                ],
                imaginePage: { // Reintroduced
                    title: "Imagina la Transformación de tu Negocio",
                    subtitle: "Transformamos negocios tradicionales en empresas digitales exitosas",
                    step1: {
                        icon: 'fas fa-building', // Icon for old business
                        title: "Tu Negocio Antiguo",
                        description: "Un negocio con potencial, pero sin la presencia digital necesaria para alcanzar su máximo impacto."
                    },
                    step2: {
                        icon: 'fas fa-handshake', // Icon for meeting
                        title: "Dezgital se Encuentra Contigo",
                        description: "Analizamos tus necesidades, identificamos oportunidades y diseñamos una estrategia digital a medida."
                    },
                    step3: {
                        icon: 'fas fa-cogs', // Icon for transformation
                        title: "La Transformación Digital",
                        description: "Implementamos soluciones innovadoras: desde un sitio web impactante hasta campañas de marketing."
                    },
                    step4: {
                        icon: 'fas fa-chart-line', // Icon for prosperous business
                        title: "Tu Negocio Próspero",
                        description: "Con una presencia digital fuerte, tu negocio crece, atrae más clientes y alcanza nuevas alturas."
                    },
                    stats: {
                        title: "Resultados que Hablan por Sí Solos",
                        stat1: "+300% Aumento en ventas promedio",
                        stat2: "+500% Incremento en visibilidad online",
                        stat3: "+200% Nuevos clientes digitales",
                        stat4: "24/7 Disponibilidad de ventas"
                    }
                },
                orderPage: {
                    title: "Ya estas a un paso de tu Plan: ", // Updated title
                    selectDateTime: "Seleccione el lugar, día y hora de la reunión",
                    personName: "Nombre de la persona", // Changed from companyName
                    personPlaceholder: "Ej: Juan Pérez", // Changed from companyPlaceholder
                    meetingAddress: "Dirección de la reunión",
                    addressPlaceholder: "Comience a escribir su dirección (Ej: Calle Principal #123)",
                    meetingDay: "Día de la reunión",
                    meetingTime: "Hora de la reunión",
                    phoneNumber: "Número de teléfono",
                    enterNumber: "Ingrese número",
                    paymentMethodsTitle: "El pago puede realizarse a través de:",
                    paypal: "PayPal",
                    paypalEmail: "Correo:",
                    zelle: "Zelle",
                    zelleNumber: "Número:",
                    bankTransfer: "Transferencia Bancaria",
                    bank: "Banco:",
                    account: "Cuenta de Ahorro:",
                    acceptButton: "Aceptar",
                    thankYou: "¡GRACIAS!",
                    modalMessage: "Espere nuestro mensaje en breve para la confirmación de su reunión.",
                    bookingDetails: "Detalles de su reserva:",
                    modalPerson: "Persona:", // Changed from modalCompany
                    modalAddress: "Dirección:",
                    modalDate: "Fecha:",
                    modalTime: "Hora:",
                    modalPhone: "Teléfono:",
                    closeButton: "Cerrar",
                    alertPerson: "Por favor ingrese el nombre de la persona.", // Alert changed
                    alertAddress: "Por favor ingrese la dirección de la reunión.",
                    alertDate: "Por favor seleccione una fecha para la reunión.",
                    alertTime: "Por favor seleccione la hora de la reunión.",
                    alertPhone: "Por favor ingrese un número de teléfono válido de 10 dígitos.",
                    authError: "No se pudo procesar la orden. Por favor, intente de nuevo o asegúrese de que su conexión a internet sea estable." // New authentication error message
                },
                processedPage: { // New texts for ProcessedPage
                    title: "Procesando tu Servicio: ",
                    selectDateTime: "Seleccione el día y hora de la reunión",
                    personName: "Nombre de la persona",
                    personPlaceholder: "Ej: Juan Pérez",
                    meetingDay: "Día de la reunión",
                    meetingTime: "Hora de la reunión",
                    phoneNumber: "Número de teléfono",
                    enterNumber: "Ingrese número",
                    paymentMethodsTitle: "El pago puede realizarse a través de:",
                    paypal: "PayPal",
                    paypalEmail: "Correo:",
                    zelle: "Zelle",
                    zelleNumber: "Número:",
                    bankTransfer: "Transferencia Bancaria",
                    bank: "Banco:",
                    account: "Cuenta de Ahorro:",
                    proceedButton: "Proceder", // Changed from Accept
                    thankYou: "¡GRACIAS!",
                    modalMessage: "Espere nuestro mensaje en breve para la confirmación de su servicio.",
                    bookingDetails: "Detalles de su servicio:",
                    modalPerson: "Persona:",
                    modalService: "Servicio:",
                    modalDate: "Fecha:",
                    modalTime: "Hora:",
                    modalPhone: "Teléfono:",
                    noDateTimeRequired: "No se requiere fecha ni hora para este servicio.", // New text
                    closeButton: "Cerrar",
                    alertPerson: "Por favor ingrese el nombre de la persona.",
                    alertDate: "Por favor seleccione una fecha para la reunión.",
                    alertTime: "Por favor seleccione la hora de la reunión.",
                    alertPhone: "Por favor ingrese un número de teléfono válido de 10 dígitos.",
                    totalAmount: "Total: ",
                    halfPaymentMessage: "Pague el 50% por adelantado: ",
                    scheduleQuestion: "¿Deseas agendar el día en tu teléfono celular?",
                    yesSchedule: "Sí, agendar",
                    noThanks: "No, gracias",
                    paymentInitiated: "¡Pago iniciado! Ahora puedes proceder con tu orden.",
                    paymentZelleDetails: "Por favor, realiza tu pago vía Zelle a: 347-782-3215. Una vez completado, puedes proceder con tu orden.",
                    paymentShopPayDetails: "Redirigiendo a Shop Pay para completar el pago. Por favor, sigue las instrucciones en pantalla.",
                    paymentApplePayDetails: "Abriendo Apple Pay para completar el pago. Por favor, sigue las instrucciones en pantalla.",
                    paymentPayPalDetails: "Redirigiendo a PayPal para completar el pago. Por favor, sigue las instrucciones en pantalla.",
                    selectPaymentMethod: "Por favor, seleccione un método de pago para continuar.",
                    authError: "No se pudo procesar la orden. Por favor, intente de nuevo o asegúrese de que su conexión a internet sea estable." // New authentication error message
                },
                adminPage: {
                    title: "Panel de Administración",
                    subtitle: "Gestión de Órdenes y Disponibilidad",
                    ordersSectionTitle: "Órdenes Recientes",
                    unavailableDaysSectionTitle: "Días No Disponibles",
                    selectUnavailableDays: "Seleccione los días que no desea tener disponibilidad",
                    saveButton: "Guardar Días No Disponibles",
                    passwordPrompt: "Ingrese la contraseña de administrador:",
                    incorrectPassword: "Contraseña incorrecta. Inténtelo de nuevo.",
                    saveSuccess: "¡Guardado!",
                    saveSuccessDetails: "Cambios guardados correctamente.", // More generic
                    priceManagementTitle: "Gestión de Precios",
                    locationManagementTitle: "Mi Ubicación",
                    selectLocation: "Seleccione su ubicación actual:",
                    locationDR: "República Dominicana",
                    locationUS: "Estados Unidos",
                    savePricesButton: "Guardar Precios",
                    saveLocationButton: "Guardar Ubicación",
                    priceSavedSuccess: "Precios guardados correctamente.",
                    locationSavedSuccess: "Ubicación guardada correctamente.",
                    deleteOrderConfirm: "¿Estás seguro de que quieres eliminar esta orden?",
                    deleteOrderSuccess: "Orden eliminada.",
                    deleteOrderError: "Error al eliminar la orden.",
                    totalOrdersAmount: "Monto Total de Órdenes: "
                },
                customization: { // New texts for customization options
                    photoCountLabel: "Número de fotografías:",
                    minPhotosWarning: "Mínimo de fotos: ",
                    videoDurationLabel: "Duración del video (segundos):",
                    minDurationWarning: "Mínimo de segundos: ",
                    chooseLocationLabel: "¿Desea elegir la zona de grabación?",
                    locationExtraCost: "+$100 por elegir zona",
                    pageCountLabel: "Número de páginas web:",
                    minPagesWarning: "Mínimo de páginas: "
                }
            }
        };

        // ToastNotification Component (New)
        const ToastNotification = ({ message, type, onClose }) => {
            const [isVisible, setIsVisible] = useState(false);

            useEffect(() => {
                setIsVisible(true);
                const timer = setTimeout(() => {
                    setIsVisible(false);
                    if (onClose) {
                        setTimeout(onClose, 300); // Small delay for exit transition
                    }
                }, 3000); // Visible for 3 seconds

                return () => clearTimeout(timer);
            }, [onClose]);

            const iconClass = type === 'success' ? 'fas fa-check-circle' : 'fas fa-exclamation-circle';
            const typeClass = type === 'success' ? 'success' : 'error';

            return ReactDOM.createPortal(
                <div className={`toast-notification ${typeClass} ${isVisible ? 'show' : ''}`}>
                    <i className={`toast-icon ${iconClass}`}></i>
                    <span>{message}</span>
                </div>,
                document.getElementById('toast-root')
            );
        };

        // Navbar Component
        const Navbar = ({ toggleTheme, themeMode, currentPage, setCurrentPage, texts }) => {
            useEffect(() => {
                const handleScroll = () => {
                    const navbar = document.querySelector('.navbar');
                    if (navbar) {
                        const scrolled = window.pageYOffset;
                        if (scrolled > 100) {
                            navbar.classList.add('scrolled');
                        } else {
                            navbar.classList.remove('scrolled');
                        }
                    }
                };
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const handleNavLinkClick = (e, sectionId) => {
                e.preventDefault();
                if (currentPage !== 'home') {
                    setCurrentPage('home');
                    setTimeout(() => {
                        const target = document.getElementById(sectionId);
                        if (target) {
                            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }, 0); // Allow state update to render home page first
                } else {
                    const target = document.getElementById(sectionId);
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            };

            return (
                <nav className="navbar fixed w-full py-5 px-10 backdrop-blur-md border-b border-gray-200 border-opacity-70 z-50 transition-all duration-300 ease-in-out">
                    <div className="max-w-screen-xl mx-auto flex justify-between items-center">
                        <div className="flex items-center space-x-4">
                            {/* The "Dezgital" text/logo now redirects to the home page */}
                            <div
                                className="text-3xl font-bold bg-gradient-to-r from-dez-primary to-dez-secondary text-gradient uppercase tracking-wide cursor-pointer"
                                onClick={() => setCurrentPage('home')}
                            >
                                {texts.es.dezgital}
                            </div>
                            <a href="https://www.instagram.com/joshuadiaz05/" target="_blank" rel="noopener noreferrer" className="text-dez-gray-text hover:text-dez-secondary transition-colors duration-300">
                                <i className="fab fa-instagram"></i>
                            </a>
                            <a href="https://w.app/dezgital" target="_blank" rel="noopener noreferrer" className="text-dez-gray-text hover:text-green-500 transition-colors duration-300">
                                <i className="fab fa-whatsapp"></i>
                            </a>
                        </div>
                        <div className="flex space-x-8 items-center"> {/* Align theme icons */}
                            <a href="#services" onClick={(e) => handleNavLinkClick(e, 'services')} className="text-dez-gray-text hover:text-dez-primary font-medium transition-all duration-300 relative">{texts.es.navbar.services}</a>
                            <a href="#plans" onClick={(e) => handleNavLinkClick(e, 'plans')} className="text-dez-gray-text hover:text-dez-primary font-medium transition-all duration-300 relative">{texts.es.navbar.plans}</a>
                            <a href="#about-us" onClick={(e) => handleNavLinkClick(e, 'about-us')} className="text-dez-gray-text hover:text-dez-primary font-medium transition-all duration-300 relative">{texts.es.navbar.aboutUs}</a>
                            <a href="#contact-section" onClick={(e) => handleNavLinkClick(e, 'contact-section')} className="text-dez-gray-text hover:text-dez-primary font-medium transition-all duration-300 relative">{texts.es.navbar.contact}</a>
                            {/* Removed from navbar: <a href="#imagine-section" onClick={(e) => { e.preventDefault(); setCurrentPage('imagine'); }} className="text-dez-gray-text hover:text-dez-primary font-medium transition-all duration-300 relative">{texts.es.navbar.imagine}</a> */}
                            {/* Lightbulb icon to change theme (Light/Dark) */}
                            <i
                                className={`fas fa-lightbulb text-2xl lightbulb-icon ${themeMode === 'dark' ? 'text-yellow-400' : 'text-gray-400'}`}
                                onClick={() => toggleTheme('dark')}
                                style={{
                                    textShadow: themeMode === 'dark' ? '0 0 10px rgba(255, 204, 0, 0.8)' : 'none'
                                }}
                            ></i>
                            {/* New palette icon to change theme (Electric Neon) */}
                            <i
                                className={`fas fa-palette text-2xl palette-icon ${themeMode === 'neon' ? 'text-orange-500' : 'text-gray-400'}`}
                                onClick={() => toggleTheme('neon')}
                                style={{
                                    textShadow: themeMode === 'neon' ? '0 0 10px rgba(255, 140, 0, 0.8)' : 'none'
                                }}
                            ></i>
                        </div>
                    </div>
                </nav>
            );
        };

        // Hero Component
        const Hero = ({ navigateToServices, texts, setCurrentPage }) => {
            return (
                <section className="hero min-h-[70vh] flex flex-col md:flex-row items-center justify-center relative overflow-hidden px-5 py-12 rounded-3xl">
                    <div className="relative z-10 w-full md:w-1/2 flex justify-center items-center h-full md:h-auto py-10 md:py-0">
                        <img
                            src="pantalla oscuro.jpg"
                            alt="[Image of a dark screen]"
                            className="max-h-full max-w-full object-contain rounded-lg shadow-2xl animate-[fadeInUp_1s_ease_forwards]"
                            onError={(e) => { e.target.onerror = null; e.target.src="images/pantalla oscuro.png"; }}
                        />
                    </div>

                    <div className="relative text-center md:text-right z-10 w-full md:w-1/2 max-w-4xl px-5">
                        {/* Removed animated-title class to prevent hover changes */}
                        <h1 className="text-6xl font-extrabold mb-8 leading-tight bg-gradient-to-r from-dez-dark-text via-dez-primary to-dez-secondary text-gradient animate-[fade-in-slide-up_1.5s_ease-out_forwards]">{texts.es.hero.title}</h1>
                        <div className="flex justify-center md:justify-end gap-4">
                            {/* Added scale animation to buttons */}
                            <button onClick={() => navigateToServices('todos')} className="inline-block py-4 px-8 bg-gradient-to-r from-dez-primary to-dez-secondary text-white no-underline rounded-full font-bold text-lg transition-all duration-300 shadow-lg shadow-dez-primary/30 hover:translate-y-[-5px] hover:shadow-dez-primary/50 hover:scale-110 animate-[fadeInUp_1s_ease_0.4s_both]">{texts.es.hero.exploreButton}</button>
                            <button onClick={() => setCurrentPage('imagine')} className="inline-block py-4 px-8 bg-gradient-to-r from-gray-700 to-gray-900 text-white no-underline rounded-full font-bold text-lg transition-all duration-300 shadow-lg shadow-gray-700/30 hover:translate-y-[-5px] hover:shadow-gray-700/50 hover:scale-110 animate-[fadeInUp_1s_ease_0.6s_both]">{texts.es.hero.imagineButton}</button> {/* Reintroduced */}
                        </div>
                    </div>
                </section>
            );
        };

        // Services Component (from main page)
        const Services = ({ navigateToServices, texts }) => {
            useEffect(() => {
                const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('opacity-100', 'translate-y-0');
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);

                const cards = document.querySelectorAll('.service-card');
                cards.forEach((card, index) => {
                    card.classList.add('opacity-0', 'translate-y-12');
                    card.style.transition = `all 0.6s ease ${index * 0.1}s`;
                    observer.observe(card);
                });
                return () => cards.forEach(card => observer.unobserve(card));
            }, []);

            return (
                <section className="services py-24 px-10 max-w-screen-xl mx-auto section-transition rounded-3xl" id="services" style={{ backgroundColor: 'var(--section-services-bg)' }}>
                    <h2 className="text-center text-5xl font-extrabold mb-4 bg-gradient-to-r from-dez-dark-text to-dez-primary text-gradient animated-title">{texts.es.servicesSection.title}</h2> {/* Reduced mb from 8 to 4 */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mt-4">
                        <div className="service-card animated-card bg-opacity-70 backdrop-blur-xl rounded-3xl p-6 text-center relative overflow-hidden cursor-pointer" onClick={() => navigateToServices('software')}>
                            <div className="service-icon w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-dez-primary to-dez-secondary rounded-full flex items-center justify-center text-4xl text-white">
                                <i className="fas fa-globe"></i>
                            </div>
                            <h3 className="text-xl font-semibold mb-3 text-dez-dark-text animated-title">{texts.es.servicesSection.webTitle}</h3>
                            <p className="text-dez-gray-text text-sm leading-tight">{texts.es.servicesSection.webDescription}</p>
                        </div>
                        <div className="service-card animated-card bg-opacity-70 backdrop-blur-xl rounded-3xl p-6 text-center relative overflow-hidden cursor-pointer" onClick={() => navigateToServices('fotografia')}>
                            <div className="service-icon w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-dez-primary to-dez-secondary rounded-full flex items-center justify-center text-4xl text-white">
                                <i className="fas fa-camera-retro"></i>
                            </div>
                            <h3 className="text-xl font-semibold mb-3 text-dez-dark-text animated-title">{texts.es.servicesSection.photographyTitle}</h3>
                            <p className="text-dez-gray-text text-sm leading-tight">{texts.es.servicesSection.photographyDescription}</p>
                        </div>
                        <div className="service-card animated-card bg-opacity-70 backdrop-blur-xl rounded-3xl p-6 text-center relative overflow-hidden cursor-pointer" onClick={() => navigateToServices('videos')}>
                            <div className="service-icon w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-dez-primary to-dez-secondary rounded-full flex items-center justify-center text-4xl text-white">
                                <i className="fas fa-video"></i>
                            </div>
                            <h3 className="text-xl font-semibold mb-3 text-dez-dark-text animated-title">{texts.es.servicesSection.videographyTitle}</h3>
                            <p className="text-dez-gray-text text-sm leading-tight">{texts.es.servicesSection.videographyDescription}</p>
                        </div>
                    </div>
                </section>
            );
        };

        // Pricing Component (now Plans)
        const Pricing = ({ texts, setCurrentPage, setSelectedPlan, prices }) => {
            // Base price for the enterprise plan
            const BASE_ENTERPRISE_PRICE = 0; // Initial cost set to 0

            const [postQuantity, setPostQuantity] = useState(12); // Initial post quantity: 12
            const [hasWebsite, setHasWebsite] = useState(false);
            const [autoPosting, setAutoPosting] = useState(false);

            // Get prices from props, if not available, use default values from texts
            const getPrice = useCallback((key, defaultValue) => {
                return prices[key] !== undefined ? prices[key] : defaultValue;
            }, [prices]);

            const basicPlanPrice = getPrice('basic_plan', 800);
            const professionalPlanPrice = getPrice('professional_plan', 1200);

            // Calculate enterprise plan price dynamically
            const enterprisePrice = BASE_ENTERPRISE_PRICE +
                                    (postQuantity * getPrice('enterprise_post_cost', 100)) + // Each post increases by $100
                                    (hasWebsite ? getPrice('enterprise_website_cost', 1500) : 0) + // Website increases by $1500
                                    (autoPosting ? getPrice('enterprise_autoposting_cost', 300) : 0); // Auto-posting increases by $300


            useEffect(() => {
                const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('opacity-100', 'translate-y-0');
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);

                const cards = document.querySelectorAll('.pricing-card');
                cards.forEach((card, index) => {
                    card.classList.add('opacity-0', 'translate-y-12');
                    card.style.transition = `all 0.6s ease ${index * 0.1}s`;
                    observer.observe(card);
                });
                return () => cards.forEach(card => observer.unobserve(card));
            }, []);

            const handleProceedClick = (planName) => {
                setSelectedPlan(planName);
                setCurrentPage('order');
            };

            return (
                <section className="pricing py-24 px-10 max-w-screen-lg mx-auto section-transition rounded-3xl" id="plans" style={{ backgroundColor: 'var(--section-pricing-bg)' }}>
                    <div className="max-w-screen-lg mx-auto">
                        <h2 className="text-center text-5xl font-extrabold mb-4 bg-gradient-to-r from-dez-dark-text to-dez-primary text-gradient animated-title">{texts.es.pricingSection.title}</h2> {/* Reduced mb from 12 to 4 */}
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-10 mt-12">
                            {/* Basic Card - Reverted to original color */}
                            <div className="pricing-card featured animated-card rounded-3xl p-12 text-center relative transition-all duration-300 scale-105">
                                <div className="text-2xl font-semibold mb-5 text-dez-primary">{texts.es.pricingSection.basicPlan}</div>
                                <div className="text-5xl font-bold mb-3 text-dez-dark-text">${basicPlanPrice}</div>
                                <div className="text-dez-gray-text opacity-70 mb-8">{texts.es.pricingSection.perMonth}</div>
                                <ul className="list-none mb-10 text-dez-gray-text">
                                    <li className="py-2 border-b border-gray-200 border-opacity-70">{texts.es.pricingSection.basicWebsite}</li>
                                    <li className="py-2 border-b border-gray-200 border-opacity-70">{texts.es.pricingSection.responsiveDesign}</li>
                                    <li className="py-2 border-b border-gray-200 border-opacity-70">{texts.es.pricingSection.seoOptimization}</li>
                                    <li className="py-2">1 {texts.es.pricingSection.monthSupport}</li>
                                </ul>
                                <button onClick={() => handleProceedClick(texts.es.pricingSection.basicPlan)} className="inline-block py-4 px-8 bg-gradient-to-r from-dez-primary to-dez-secondary text-white no-underline rounded-full font-bold text-lg transition-all duration-300 shadow-lg shadow-dez-primary/30 hover:translate-y-[-5px] hover:shadow-dez-primary/50">{texts.es.pricingSection.proceedButton}</button>
                            </div>
                            {/* Professional Card - Reverted to original color */}
                            <div className="pricing-card featured animated-card rounded-3xl p-12 text-center relative transition-all duration-300 scale-105">
                                <div className="text-2xl font-semibold mb-5 text-dez-primary">{texts.es.pricingSection.professionalPlan}</div>
                                <div className="text-5xl font-bold mb-3 text-dez-dark-text">${professionalPlanPrice}</div>
                                <div className="opacity-70 mb-8 text-dez-gray-text">{texts.es.pricingSection.perMonth}</div>
                                <ul className="list-none mb-10 text-dez-gray-text">
                                    <li className="py-2 border-b border-gray-200 border-opacity-70">{texts.es.pricingSection.advancedWebsite}</li>
                                    <li className="py-2 border-b border-gray-200 border-opacity-70">{texts.es.pricingSection.photoSession}</li>
                                    <li className="py-2 border-b border-gray-200 border-opacity-70">{texts.es.pricingSection.brandVideo}</li>
                                    <li className="py-2">3 {texts.es.pricingSection.monthsSupport}</li>
                                </ul>
                                <button onClick={() => handleProceedClick(texts.es.pricingSection.professionalPlan)} className="inline-block py-4 px-8 bg-gradient-to-r from-dez-primary to-dez-secondary text-white no-underline rounded-full font-bold text-lg transition-all duration-300 shadow-lg shadow-dez-primary/30 hover:translate-y-[-5px] hover:shadow-dez-primary/50">{texts.es.pricingSection.proceedButton}</button>
                            </div>
                        </div>

                        <h3 className="text-center text-4xl md:text-5xl font-extrabold mt-20 mb-10 bg-gradient-to-r from-dez-dark-text to-dez-primary text-gradient animated-title">{texts.es.pricingSection.differentPlanQuestion}</h3>
                        <div className="relative flex flex-col md:flex-row items-center justify-center gap-10">
                            <div className="relative w-full md:w-1/2 flex items-center justify-center h-64 md:h-auto">
                                <p className="text-center text-7xl sm:text-8xl md:text-9xl lg:text-11xl font-extrabold text-dez-primary opacity-20 md:opacity-40">{texts.es.pricingSection.createOwnPlan}</p>
                            </div>
                            {/* Enterprise Card - Reverted to original color */}
                            <div className="pricing-card animated-card border border-gray-200 border-opacity-70 rounded-3xl p-12 text-center relative transition-all duration-300">
                                <div className="text-2xl font-semibold mb-5 text-dez-primary">{texts.es.pricingSection.enterprisePlan}</div>
                                <div className="text-5xl font-bold mb-3 text-dez-dark-text">${enterprisePrice}</div> {/* Dynamic price */}
                                <div className="opacity-70 mb-8 text-dez-gray-text">{texts.es.pricingSection.perMonth}</div>

                                {/* Custom content for Enterprise */}
                                <div className="flex flex-col items-center space-y-4 text-dez-gray-text">
                                    <div className="flex items-center space-x-2 w-full justify-between">
                                        <label htmlFor="post-quantity" className="text-lg">{texts.es.pricingSection.postQuantity}</label>
                                        <input
                                            type="number"
                                            id="post-quantity"
                                            value={postQuantity}
                                            onChange={(e) => setPostQuantity(parseInt(e.target.value) || 0)}
                                            min="0"
                                            className="w-24 p-2 rounded-md bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-center"
                                        />
                                    </div>
                                    <div className="flex items-center space-x-2 w-full justify-between">
                                        <label htmlFor="has-website" className="text-lg">{texts.es.pricingSection.hasWebsite}</label>
                                        <input
                                            type="checkbox"
                                            id="has-website"
                                            checked={hasWebsite}
                                            onChange={(e) => setHasWebsite(e.target.checked)}
                                            className="form-checkbox h-5 w-5 text-dez-primary rounded"
                                        />
                                    </div>
                                    <div className="flex items-center space-x-2 w-full justify-between">
                                        <label htmlFor="auto-posting" className="text-lg">{texts.es.pricingSection.autoPosting}</label>
                                        <input
                                            type="checkbox"
                                            id="auto-posting"
                                            checked={autoPosting}
                                            onChange={(e) => setAutoPosting(e.target.checked)}
                                            className="form-checkbox h-5 w-5 text-dez-primary rounded"
                                        />
                                    </div>
                                </div>
                                <button onClick={() => handleProceedClick(`${texts.es.pricingSection.enterprisePlan} - $${enterprisePrice}`)} className="inline-block py-4 px-8 bg-gradient-to-r from-dez-primary to-dez-secondary text-white no-underline rounded-full font-bold text-lg transition-all duration-300 shadow-lg shadow-dez-primary/30 hover:translate-y-[-5px] hover:shadow-dez-primary/50 mt-8">{texts.es.pricingSection.proceedButton}</button>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        // New component for text with hover glow effect
        const LuminousHoverPhrase = ({ text }) => {
            return (
                <p className="text-center text-lg md:text-xl font-semibold text-dez-dark-text opacity-90 mb-8 max-w-4xl mx-auto leading-relaxed">
                    <span className="luminous-text-hover">
                        {text}
                    </span>
                </p>
            );
        };

        // AboutUs Component
        const AboutUs = ({ texts }) => {
            return (
                <section className="about-us py-24 px-10 max-w-screen-xl mx-auto section-transition rounded-3xl" id="about-us" style={{ backgroundColor: 'var(--section-about-us-bg)' }}>
                    <div className="max-w-screen-xl mx-auto">
                        <h2 className="text-center text-5xl font-extrabold mb-4 bg-gradient-to-r from-dez-dark-text to-dez-primary text-gradient animated-title">{texts.es.aboutUsSection.title}</h2> {/* Reduced mb from 16 to 4 */}
                        <div className="text-center text-xl text-dez-gray-text mb-12 max-w-3xl mx-auto">
                            <p>{texts.es.aboutUsSection.introText}</p>
                        </div>

                        {/* Integration of the new text animation component */}
                        <LuminousHoverPhrase text={texts.es.aboutUsSection.luminousPhrase} />

                        {/* Main container for Founder, Mission, and Vision - Now in parallel */}
                        <div className="flex flex-col md:flex-row items-center md:items-start gap-6"> {/* gap-6 to bring closer */}
                            <div className="w-full md:w-1/2 flex flex-col items-center md:items-start text-center md:text-left">
                                <h3 className="text-4xl font-extrabold mb-4 bg-gradient-to-r from-dez-dark-text to-dez-primary text-gradient animated-title">{texts.es.aboutUsSection.founderTitle}</h3>
                                <div className="animated-card bg-opacity-70 backdrop-blur-xl rounded-lg p-6 shadow-lg max-w-xs w-full">
                                    <img
                                        src="https://placehold.co/300x300/E0F7FA/263238?text=Joshua+Diaz"
                                        alt="[Image of Joshua Diaz]"
                                        className="w-full h-auto rounded-md mb-4 object-cover"
                                        onError={(e) => { e.target.onerror = null; e.target.src='https://placehold.co/300x300/E0F7FA/263238?text=Image+Unavailable'; }}
                                    />
                                    <h4 className="text-xl font-semibold text-dez-dark-text mb-2">{texts.es.aboutUsSection.founderName}</h4>
                                    <p className="text-sm text-dez-gray-text">{texts.es.aboutUsSection.founderDescription}</p>
                                </div>
                            </div>

                            {/* Container for Mission and Vision - Now occupying the other half */}
                            <div className="w-full md:w-1/2 flex flex-col gap-6 mt-[44px]"> {/* mt-[44px] to move up 88px */}
                                <div className="animated-card bg-opacity-70 backdrop-blur-xl rounded-lg p-8 shadow-lg">
                                    <h3 className="text-3xl font-extrabold mb-4 bg-gradient-to-r from-dez-dark-text to-dez-secondary text-gradient animated-title">{texts.es.aboutUsSection.missionTitle}</h3>
                                    <p className="text-dez-gray-text text-lg leading-relaxed">{texts.es.aboutUsSection.missionText}</p>
                                </div>
                                <div className="animated-card bg-opacity-70 backdrop-blur-xl rounded-lg p-8 shadow-lg">
                                    <h3 className="text-3xl font-extrabold mb-4 bg-gradient-to-r from-dez-dark-text to-dez-secondary text-gradient animated-title">{texts.es.aboutUsSection.visionTitle}</h3>
                                    <p className="text-dez-gray-text text-lg leading-relaxed">{texts.es.aboutUsSection.visionText}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        // Contact Component
        const Contact = ({ texts, currentLocation }) => {
            return (
                <section className="contact py-24 px-10 max-w-screen-lg mx-auto section-transition rounded-3xl" id="contact-section" style={{ backgroundColor: 'var(--section-contact-bg)' }}>
                    <div className="max-w-screen-lg mx-auto">
                        <h2 className="text-center text-5xl font-extrabold mb-4 bg-gradient-to-r from-dez-dark-text to-dez-secondary text-gradient animated-title">{texts.es.contactSection.title}</h2> {/* Reduced mb from 12 to 4 */}
                        <p className="text-xl text-dez-gray-text text-center mb-16">{texts.es.contactSection.introText}</p>

                        <div className="flex flex-col md:flex-row gap-10 items-center md:items-start">
                            <div className="w-full md:w-1/2 flex flex-col gap-6 items-center md:items-start">
                                <a href="https://www.instagram.com/joshuadiaz05/" target="_blank" rel="noopener noreferrer" className="animated-card bg-opacity-70 backdrop-blur-xl rounded-lg p-4 flex flex-col items-center justify-center space-y-2 w-full md:flex-1 md:max-w-xs h-48 contact-instagram-card">
                                    <div className="w-12 h-12 flex items-center justify-center text-3xl text-dez-secondary">
                                        <i className="fab fa-instagram"></i>
                                    </div>
                                    <div className="text-center">
                                        <h3 className="text-base font-semibold text-dez-dark-text animated-title">{texts.es.contactSection.instagramTitle}</h3>
                                        <p className="text-sm text-dez-gray-text">{texts.es.contactSection.instagramDescription}</p>
                                    </div>
                                </a>

                                <a href="https://w.app/dezgital" target="_blank" rel="noopener noreferrer" className="animated-card bg-opacity-70 backdrop-blur-xl rounded-lg p-4 flex flex-col items-center justify-center space-y-2 w-full md:flex-1 md:max-w-xs h-48 contact-whatsapp-card">
                                    <div className="w-12 h-12 flex items-center justify-center text-3xl text-green-500">
                                        <i className="fab fa-whatsapp"></i>
                                    </div>
                                    <div className="text-center">
                                        <h3 className="text-base font-semibold text-dez-dark-text animated-title">{texts.es.contactSection.whatsappTitle}</h3>
                                        <p className="text-sm text-dez-gray-text">{texts.es.contactSection.whatsappDescription}</p>
                                    </div>
                                </a>

                                <a href="mailto:hello@dezgital.com" className="animated-card bg-opacity-70 backdrop-blur-xl rounded-lg p-4 flex flex-col items-center justify-center space-y-2 w-full md:flex-1 md:max-w-xs h-48 contact-email-card">
                                    <div className="w-12 h-12 flex items-center justify-center text-3xl text-dez-primary">
                                        <i className="fas fa-envelope"></i>
                                    </div>
                                    <div className="text-center">
                                        <h3 className="text-base font-semibold text-dez-dark-text animated-title">{texts.es.contactSection.emailTitle}</h3>
                                        <p className="text-sm text-dez-gray-text">{texts.es.contactSection.emailDescription}</p>
                                    </div>
                                </a>
                            </div>

                            <div className="w-full md:w-1/2 flex flex-col items-center md:items-start text-center md:text-left p-4">
                                <h3 className="text-4xl font-extrabold mb-6 bg-gradient-to-r from-dez-dark-text to-dez-primary text-gradient animated-title">{texts.es.contactSection.locationTitle}</h3>
                                <p className="text-lg text-dez-gray-text mb-8">{currentLocation}</p> {/* Use dynamic location */}
                                <div className="animated-card rounded-lg overflow-hidden shadow-xl w-full max-w-sm mx-auto md:mx-0">
                                    <img
                                        src="https://placehold.co/400x300/E0F7FA/263238?text=Dominican+Republic+Silhouette"
                                        alt="[Image of Dominican Republic Silhouette]"
                                        className="w-full h-auto object-cover"
                                        onError={(e) => { e.target.onerror = null; e.target.src='https://placehold.co/400x300/E0F7FA/263238?text=Image+Unavailable'; }}
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        // Footer Component
        const Footer = ({ texts, setCurrentPage }) => {
            const handleAdminClick = () => {
                setCurrentPage('admin'); // Directly set page to admin, AdminPage will handle authentication
            };

            return (
                <footer className="footer py-12 px-10 text-center border-t border-gray-200 border-opacity-70 backdrop-blur-md" id="about">
                    <div className="mt-10 pt-5 border-t border-gray-200 border-opacity-70">
                        {/* Admin link moved above copyright */}
                        <button onClick={handleAdminClick} className="text-dez-gray-text hover:text-dez-primary text-sm mb-2">
                            {texts.es.footer.adminLink}
                        </button>
                        <p className="text-dez-gray-text">{texts.es.footer.copyright}</p>
                    </div>
                </footer>
            );
        };

        // ServiceDetailModal Component (New)
        const ServiceDetailModal = ({ service, onClose, texts, prices, onAccept }) => {
            const [currentMediaIndex, setCurrentMediaIndex] = useState(0);

            // States for customization
            const [photoCount, setPhotoCount] = useState(service.basePhotos || 0);
            const [videoDuration, setVideoDuration] = useState(service.baseDurationSeconds || 0);
            const [chooseLocation, setChooseLocation] = useState(false);
            const [pageCount, setPageCount] = useState(service.basePages || 0);

            // Calculate current price based on customization
            const calculateCurrentPrice = useCallback(() => {
                let basePrice = parseFloat(prices[service.priceKey] || service.price.replace('$', '').replace(',', ''));
                let calculatedPrice = basePrice;

                if (service.category === 'fotografia' && (service.priceKey === 'studio' || service.priceKey === 'street')) {
                    const pricePerPhoto = service.photoPriceIncrement;
                    const basePhotos = service.basePhotos;
                    calculatedPrice = basePrice + (photoCount - basePhotos) * pricePerPhoto;
                } else if (service.category === 'videos' && (service.priceKey === 'social_media_video' || service.priceKey === 'commercial' || service.priceKey === 'music_video' || service.priceKey === 'music_video_plus')) {
                    const pricePer30Seconds = service.durationPriceIncrement;
                    const baseDuration = service.baseDurationSeconds;
                    calculatedPrice = basePrice + ((videoDuration - baseDuration) / 30) * pricePer30Seconds;
                    if (chooseLocation) {
                        calculatedPrice += 100; // Add $100 for choosing location
                    }
                } else if (service.category === 'software' && service.priceKey === 'informative_website') {
                    const pricePerPage = service.pagePriceIncrement;
                    const basePages = service.basePages;
                    calculatedPrice = basePrice + (pageCount - basePages) * pricePerPage;
                }

                return Math.max(0, calculatedPrice); // Ensure price doesn't go below zero
            }, [service, photoCount, videoDuration, chooseLocation, pageCount, prices]);

            const [currentPrice, setCurrentPrice] = useState(calculateCurrentPrice());

            useEffect(() => {
                setCurrentPrice(calculateCurrentPrice());
            }, [photoCount, videoDuration, chooseLocation, pageCount, calculateCurrentPrice]);


            // Define media examples for each service (using placeholder images/videos)
            const serviceMediaExamples = {
                studio: [
                    { type: 'image', src: 'https://placehold.co/600x400/E0F7FA/263238?text=Studio+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/E0F7FA/263238?text=Studio+Example+2' },
                    { type: 'image', src: 'https://placehold.co/600x400/E0F7FA/263238?text=Studio+Example+3' }
                ],
                street: [
                    { type: 'image', src: 'https://placehold.co/600x400/F0F8FF/333?text=Street+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/F0F8FF/333?text=Street+Example+2' }
                ],
                brand: [
                    { type: 'image', src: 'https://placehold.co/600x400/FFF0F5/444?text=Brand+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/FFF0F5/444?text=Brand+Example+2' }
                ],
                social_media_video: [
                    { type: 'video', src: 'https://www.w3schools.com/html/mov_bbb.mp4' }, // Example video
                    { type: 'image', src: 'https://placehold.co/600x400/E0F7FA/263238?text=Social+Video+Example+2' }
                ],
                commercial: [
                    { type: 'image', src: 'https://placehold.co/600x400/E6EE9C/555?text=Commercial+Example+1' },
                    { type: 'video', src: 'https://www.w3schools.com/html/movie.mp4' } // Another example video
                ],
                music_video: [
                    { type: 'image', src: 'https://placehold.co/600x400/FFCCBC/666?text=Music+Video+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/FFCCBC/666?text=Music+Video+Example+2' }
                ],
                music_video_plus: [
                    { type: 'image', src: 'https://placehold.co/600x400/D1C4E9/777?text=Music+Video+Plus+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/D1C4E9/777?text=Music+Video+Plus+Example+2' }
                ],
                video_editing: [
                    { type: 'image', src: 'https://placehold.co/600x400/B2EBF2/888?text=Video+Editing+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/B2EBF2/888?text=Video+Editing+Example+2' }
                ],
                vfx: [
                    { type: 'image', src: 'https://placehold.co/600x400/C8E6C9/999?text=VFX+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/C8E6C9/999?text=VFX+Example+2' }
                ],
                informative_website: [
                    { type: 'image', src: 'https://placehold.co/600x400/DCEDC8/AAA?text=Informative+Website+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/DCEDC8/AAA?text=Informative+Website+Example+2' }
                ],
                e_commerce_website: [
                    { type: 'image', src: 'https://placehold.co/600x400/BBDEFB/BBB?text=E-commerce+Website+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/BBDEFB/BBB?text=E-commerce+Website+Example+2' }
                ],
                mobile_app: [
                    { type: 'image', src: 'https://placehold.co/600x400/FFCDD2/CCC?text=Mobile+App+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/FFCDD2/CCC?text=Mobile+App+Example+2' }
                ],
                company_management_system: [
                    { type: 'image', src: 'https://placehold.co/600x400/FFE0B2/DDD?text=Management+System+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/FFE0B2/DDD?text=Management+System+Example+2' }
                ],
                business_card: [
                    { type: 'image', src: 'https://placehold.co/600x400/F8BBD0/EEE?text=Business+Card+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/F8BBD0/EEE?text=Business+Card+Example+2' }
                ],
                design: [
                    { type: 'image', src: 'https://placehold.co/600x400/C5CAE9/FFF?text=Design+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/C5CAE9/FFF?text=Design+Example+2' }
                ],
                logo: [
                    { type: 'image', src: 'https://placehold.co/600x400/B3E5FC/000?text=Logo+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/B3E5FC/000?text=Logo+Example+2' }
                ],
                conceptualization: [
                    { type: 'image', src: 'https://placehold.co/600x400/D7CCC8/111?text=Conceptualization+Example+1' },
                    { type: 'image', src: 'https://placehold.co/600x400/D7CCC8/111?text=Conceptualization+Example+2' }
                ]
            };

            const media = serviceMediaExamples[service.priceKey] || [];

            const showNextMedia = () => {
                setCurrentMediaIndex((prevIndex) => (prevIndex + 1) % media.length);
            };

            const showPrevMedia = () => {
                setCurrentMediaIndex((prevIndex) => (prevIndex - 1 + media.length) % media.length);
            };

            useEffect(() => {
                // Prevent scrolling on the body when the modal is open
                document.body.style.overflow = 'hidden';
                return () => {
                    document.body.style.overflow = ''; // Re-enable scrolling on unmount
                };
            }, []);

            const handleAcceptClick = () => {
                // Create a new service object with the calculated price
                const customizedService = {
                    ...service,
                    totalAmount: currentPrice, // Add the calculated price
                    customizationDetails: {} // Add customization details for display in ProcessedPage
                };

                if (service.category === 'fotografia' && (service.priceKey === 'studio' || service.priceKey === 'street')) {
                    customizedService.customizationDetails.photoCount = photoCount;
                } else if (service.category === 'videos' && (service.priceKey === 'social_media_video' || service.priceKey === 'commercial' || service.priceKey === 'music_video' || service.priceKey === 'music_video_plus')) {
                    customizedService.customizationDetails.videoDuration = videoDuration;
                    customizedService.customizationDetails.chooseLocation = chooseLocation;
                } else if (service.category === 'software' && service.priceKey === 'informative_website') {
                    customizedService.customizationDetails.pageCount = pageCount;
                }

                onAccept(customizedService); // Pass the customized service to the parent
            };

            // Handle click on the overlay to close the modal
            const handleOverlayClick = (event) => {
                // Check if the click target is the overlay itself, not its children
                if (event.target.classList.contains('service-detail-modal-overlay')) {
                    onClose();
                }
            };


            return ReactDOM.createPortal(
                <div className="service-detail-modal-overlay show" onClick={handleOverlayClick}>
                    <div className="service-detail-modal-content">
                        <button className="service-detail-modal-close-button" onClick={onClose}>
                            &times; {/* Close icon */}
                        </button>
                        <div className="service-detail-modal-info">
                            <h2>{service.title}</h2>
                            <p dangerouslySetInnerHTML={{ __html: formatDescriptionWithBreaks(service.description) }}></p>
                            <p dangerouslySetInnerHTML={{ __html: formatDescriptionWithBreaks(service.details) }}></p>

                            {/* Customization Options */}
                            {(service.category === 'fotografia' && (service.priceKey === 'studio' || service.priceKey === 'street')) && (
                                <div className="form-group mt-4">
                                    <label htmlFor="photoCount" className="form-label text-left">{texts.es.customization.photoCountLabel}</label>
                                    <input
                                        type="number"
                                        id="photoCount"
                                        className="form-input custom-input"
                                        value={photoCount}
                                        onChange={(e) => setPhotoCount(Math.max(service.minPhotos, parseInt(e.target.value) || service.minPhotos))}
                                        min={service.minPhotos}
                                    />
                                    <p className="text-sm text-dez-gray-text mt-1">{texts.es.customization.minPhotosWarning} {service.minPhotos}</p>
                                </div>
                            )}

                            {(service.category === 'videos' && (service.priceKey === 'social_media_video' || service.priceKey === 'commercial' || service.priceKey === 'music_video' || service.priceKey === 'music_video_plus')) && (
                                <>
                                    <div className="form-group mt-4">
                                        <label htmlFor="videoDuration" className="form-label text-left">{texts.es.customization.videoDurationLabel}</label>
                                        <input
                                            type="number"
                                            id="videoDuration"
                                            className="form-input custom-input"
                                            value={videoDuration}
                                            onChange={(e) => setVideoDuration(Math.max(service.minDurationSeconds, parseInt(e.target.value) || service.minDurationSeconds))}
                                            min={service.minDurationSeconds}
                                            step="30"
                                        />
                                        <p className="text-sm text-dez-gray-text mt-1">{texts.es.customization.minDurationWarning} {service.minDurationSeconds} segundos (múltiplos de 30)</p>
                                    </div>
                                    {service.locationOption && (
                                        <div className="form-group mt-4 flex items-center justify-start gap-2">
                                            <input
                                                type="checkbox"
                                                id="chooseLocation"
                                                className="form-checkbox h-5 w-5 text-dez-primary rounded"
                                                checked={chooseLocation}
                                                onChange={(e) => setChooseLocation(e.target.checked)}
                                            />
                                            <label htmlFor="chooseLocation" className="form-label !mb-0">{texts.es.customization.chooseLocationLabel} ({texts.es.customization.locationExtraCost})</label>
                                        </div>
                                    )}
                                </>
                            )}

                            {(service.category === 'software' && service.priceKey === 'informative_website') && (
                                <div className="form-group mt-4">
                                    <label htmlFor="pageCount" className="form-label text-left">{texts.es.customization.pageCountLabel}</label>
                                    <input
                                        type="number"
                                        id="pageCount"
                                        className="form-input custom-input"
                                        value={pageCount}
                                        onChange={(e) => setPageCount(Math.max(service.minPages, parseInt(e.target.value) || service.minPages))}
                                        min={service.minPages}
                                    />
                                    <p className="text-sm text-dez-gray-text mt-1">{texts.es.customization.minPagesWarning} {service.minPages}</p>
                                </div>
                            )}

                            <p className="price">Total: ${currentPrice.toLocaleString('es-ES')}</p>

                            <button className="service-btn mt-4" onClick={handleAcceptClick}>
                                {texts.es.pricingSection.proceedButton} {/* Changed to "Proceder" */}
                            </button>
                        </div>
                        <div className="service-detail-carousel-container">
                            {media.length > 0 ? (
                                <>
                                    {media.map((item, index) => (
                                        item.type === 'image' ? (
                                            <img
                                                key={index}
                                                src={item.src}
                                                alt={`[Imagen de ${service.title} Ejemplo ${index + 1}]`}
                                                className={`service-detail-carousel-item ${index === currentMediaIndex ? 'active' : ''}`}
                                                onError={(e) => { e.target.onerror = null; e.target.src='https://placehold.co/600x400/E0F7FA/263238?text=Image+Unavailable'; }}
                                            />
                                        ) : (
                                            <video
                                                key={index}
                                                src={item.src}
                                                controls
                                                className={`service-detail-carousel-item ${index === currentMediaIndex ? 'active' : ''}`}
                                            >
                                                Your browser does not support the video tag.
                                            </video>
                                        )
                                    ))}
                                    {media.length > 1 && (
                                        <div className="carousel-dots">
                                            {media.map((_, index) => (
                                                <span
                                                    key={index}
                                                    className={`carousel-dot ${index === currentMediaIndex ? 'active' : ''}`}
                                                    onClick={() => setCurrentMediaIndex(index)}
                                                ></span>
                                            ))}
                                        </div>
                                    )}
                                </>
                            ) : (
                                <p className="text-dez-gray-text">No hay ejemplos disponibles para este servicio.</p>
                            )}
                        </div>
                    </div>
                </div>,
                document.getElementById('modal-root')
            );
        };

        // New component: DetailedServicesPage
        const DetailedServicesPage = ({ setCurrentPage, initialFilterCategory, texts, setSelectedService, prices }) => {
            const [filter, setFilter] = useState(initialFilterCategory || 'todos');
            const [isServiceModalOpen, setIsServiceModalOpen] = useState(false); // New state for service detail modal
            const [selectedServiceForModal, setSelectedServiceForModal] = useState(null); // New state for service data in modal

            // Service data - now using texts.es.serviceData
            const servicesData = texts.es.serviceData;

            // Helper to get the price, using prices prop first, then default from serviceData
            const getServicePrice = useCallback((service) => {
                return prices[service.priceKey] !== undefined ? `$${prices[service.priceKey]}` : service.price;
            }, [prices]);

            useEffect(() => {
                const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible'); // Add 'visible' class
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);

                // Observe all currently rendered service cards
                // This will run again when the `filter` state changes, and will only observe elements that are actually mounted in the DOM.
                const currentServiceCards = document.querySelectorAll('.service-card');
                currentServiceCards.forEach(card => {
                    card.classList.remove('visible'); // Ensure it's initially hidden for re-animation
                    observer.observe(card);
                });

                return () => {
                    currentServiceCards.forEach(card => observer.unobserve(card));
                };
            }, [filter]);

            const handleFilterClick = (newFilter) => {
                setFilter(newFilter);
            };

            // Modified handleSelectService to open the modal
            const handleSelectService = (service) => {
                setSelectedServiceForModal(service);
                setIsServiceModalOpen(true);
            };

            // Function to close the service detail modal
            const closeServiceDetailModal = () => {
                setIsServiceModalOpen(false);
                setSelectedServiceForModal(null);
            };

            // Function to proceed to the processed page from the modal (if needed)
            const handleAcceptServiceInModal = (customizedService) => {
                setSelectedService(customizedService); // Set the customized service for the processed page
                setCurrentPage('processed');
                closeServiceDetailModal(); // Close the modal
            };


            // Dynamically show/hide category headers based on filter
            const allCategories = ['fotografia', 'videos', 'software', 'otros']; // Order as per user request

            return (
                <div className="detailed-services-page pt-24 px-10 main-page-card">
                     <button type="button" onClick={() => setCurrentPage('home')} className="fixed top-24 left-10 py-2 px-4 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors duration-300 z-40">
                        <i className="fas fa-arrow-left mr-2"></i> {texts.es.detailedServicesPage.backButton}
                    </button>
                    <header className="detailed-services-header">
                        <h1 className="detailed-services-title text-5xl md:text-6xl lg:text-7xl">{texts.es.detailedServicesPage.title}</h1>
                        {/* Subtitle removed */}
                        <p className="detailed-services-subtitle text-lg md:text-xl">
                            {texts.es.detailedServicesPage.subtitle}
                        </p>
                    </header>

                    <nav className="filter-container flex flex-wrap justify-center gap-4">
                        <button
                            type="button"
                            className={`filter-btn ${filter === 'todos' ? 'active' : ''}`}
                            onClick={() => handleFilterClick('todos')}
                        >
                            {texts.es.detailedServicesPage.filterButtons.all}
                        </button>
                        <button
                            type="button"
                            className={`filter-btn ${filter === 'fotografia' ? 'active' : ''}`}
                            onClick={() => handleFilterClick('fotografia')}
                        >
                            {texts.es.detailedServicesPage.filterButtons.photography}
                        </button>
                        <button
                            type="button"
                            className={`filter-btn ${filter === 'videos' ? 'active' : ''}`}
                            onClick={() => handleFilterClick('videos')}
                        >
                            {texts.es.detailedServicesPage.filterButtons.videos}
                        </button>
                        <button
                            type="button"
                            className={`filter-btn ${filter === 'software' ? 'active' : ''}`}
                            onClick={() => handleFilterClick('software')}
                        >
                            {texts.es.detailedServicesPage.filterButtons.software}
                        </button>
                        <button
                            type="button"
                            className={`filter-btn ${filter === 'otros' ? 'active' : ''}`}
                            onClick={() => handleFilterClick('otros')}
                        >
                            {texts.es.detailedServicesPage.filterButtons.other}
                        </button>
                    </nav>

                    <div className="services-grid">
                        {allCategories.map(category => (
                            (filter === 'todos' || filter === category) && (
                                <React.Fragment key={category}>
                                    <div className="category-header">
                                        <h2 className="category-title">{texts.es.detailedServicesPage.categoryHeaders[category]}</h2>
                                    </div>
                                    {servicesData.filter(service => service.category === category).map((service, index) => (
                                        <div
                                            key={`${category}-${index}`}
                                            className="service-card animated-card"
                                            // No need for refs collection here, it relies on querySelectorAll in useEffect
                                        >
                                            <div className="service-visual">
                                                <div className="service-icon"><i className={service.icon}></i></div> {/* Icon added */}
                                            </div>
                                            <div className="service-content">
                                                <div className="service-description-group">
                                                    <h3 className="service-name">{service.title}</h3>
                                                    <p className="service-description">{service.description}</p>
                                                    <div className="service-details">{service.details}</div>
                                                </div>
                                                <div> {/* This div ensures price and button are grouped at the bottom */}
                                                    <div className="service-price">{getServicePrice(service)}</div>
                                                    <button
                                                        type="button"
                                                        className="service-btn"
                                                        onClick={() => handleSelectService(service)} // Pass the full service object
                                                    >
                                                        {texts.es.detailedServicesPage.selectButton}
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </React.Fragment>
                            )
                        ))}
                    </div>

                    {isServiceModalOpen && selectedServiceForModal && (
                        <ServiceDetailModal
                            service={selectedServiceForModal}
                            onClose={closeServiceDetailModal}
                            texts={texts}
                            prices={prices}
                            onAccept={handleAcceptServiceInModal} // Pass the accept handler
                        />
                    )}
                </div>
            );
        };

        // New component: ImaginePage
        const ImaginePage = ({ setCurrentPage, texts }) => {
            const stepRefs = useRef([]);
            const statsSectionRef = useRef(null); // Ref for the stats section

            const animateNumbers = useCallback(() => {
                const statNumbers = statsSectionRef.current.querySelectorAll('.stat-number');
                statNumbers.forEach(stat => {
                    const finalNumberText = stat.textContent;
                    const isPercentage = finalNumberText.includes('%');
                    const isPlusSymbol = finalNumberText.includes('+');
                    const isSlash = finalNumberText.includes('/');

                    if (!isSlash) {
                        const numericValue = parseInt(finalNumberText.replace(/[^0-9]/g, ''));
                        let currentNumber = 0;
                        const increment = Math.ceil(numericValue / 50);

                        const timer = setInterval(() => {
                            currentNumber += increment;
                            if (currentNumber >= numericValue) {
                                currentNumber = numericValue;
                                clearInterval(timer);
                            }

                            let displayValue = currentNumber;
                            if (isPlusSymbol) displayValue = '+' + displayValue;
                            if (isPercentage) displayValue = displayValue + '%';

                            stat.textContent = displayValue;
                        }, 30);
                    }
                });
            }, []);

            useEffect(() => {
                const observerOptions = { threshold: 0.5, rootMargin: '0px' }; // Increased threshold so animation starts when card is more visible
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        } else {
                            // Optional: reset animation if it leaves view
                            // entry.target.classList.remove('visible'); // Commented out to maintain visibility once animated
                        }
                    });
                }, observerOptions);

                stepRefs.current.forEach((step, index) => {
                    if (step) {
                        step.dataset.step = index + 1;
                        observer.observe(step);
                    }
                });

                // Observer for the stats section
                const statsObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            animateNumbers();
                            statsObserver.unobserve(entry.target); // Stop observing once animated
                        }
                    });
                }, { threshold: 0.5 }); // Activates when 50% of the stats section is visible

                if (statsSectionRef.current) {
                    statsObserver.observe(statsSectionRef.current);
                }


                return () => {
                    stepRefs.current.forEach(step => {
                        if (step) observer.unobserve(step);
                    });
                    if (statsSectionRef.current) {
                        statsObserver.unobserve(statsSectionRef.current);
                    }
                };
            }, [animateNumbers]);

            return (
                <div className="imagine-page pt-24 px-10 main-page-card">
                    <button type="button" onClick={() => setCurrentPage('home')} className="fixed top-24 left-10 py-2 px-4 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors duration-300 z-40">
                        <i className="fas fa-arrow-left mr-2"></i> {texts.es.detailedServicesPage.backButton}
                    </button>

                    <div className="hero-section">
                        <h1>{texts.es.imaginePage.title}</h1>
                        <p>{texts.es.imaginePage.subtitle}</p>
                    </div>

                    <div className="imagine-process-grid">
                        {/* SVG Connection Lines */}
                        <div className="imagine-connection-lines">
                            <svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                                {/* Path 1: Card 1 (top-left) to Card 2 (top-right) */}
                                <path d="M 25 25 C 40 10, 60 10, 75 25" className="animated-path" />
                                {/* Path 2: Card 2 (top-right) to Card 3 (bottom-left) - zig-zag down */}
                                <path d="M 75 25 C 90 50, 10 50, 25 75" className="animated-path" />
                                {/* Path 3: Card 3 (bottom-left) to Card 4 (bottom-right) */}
                                <path d="M 25 75 C 40 90, 60 90, 75 75" className="animated-path" />
                            </svg>
                        </div>

                        {/* Step 1: Your Old Business */}
                        <div className="imagine-step-card" ref={el => stepRefs.current[0] = el}>
                            <div className="imagine-step-icon-circle"><i className={texts.es.imaginePage.step1.icon}></i></div>
                            <h3 className="imagine-step-title">{texts.es.imaginePage.step1.title}</h3>
                            <p className="imagine-step-description">{texts.es.imaginePage.step1.description}</p>
                        </div>

                        {/* Step 2: Dezgital Meets You */}
                        <div className="imagine-step-card" ref={el => stepRefs.current[1] = el}>
                            <div className="imagine-step-icon-circle"><i className={texts.es.imaginePage.step2.icon}></i></div>
                            <h3 className="imagine-step-title">{texts.es.imaginePage.step2.title}</h3>
                            <p className="imagine-step-description">{texts.es.imaginePage.step2.description}</p>
                        </div>

                        {/* Step 3: The Digital Transformation */}
                        <div className="imagine-step-card" ref={el => stepRefs.current[2] = el}>
                            <div className="imagine-step-icon-circle"><i className={texts.es.imaginePage.step3.icon}></i></div>
                            <h3 className="imagine-step-title">{texts.es.imaginePage.step3.title}</h3>
                            <p className="imagine-step-description">{texts.es.imaginePage.step3.description}</p>
                        </div>

                        {/* Step 4: Your Prosperous Business */}
                        <div className="imagine-step-card" ref={el => stepRefs.current[3] = el}>
                            <div className="imagine-step-icon-circle"><i className={texts.es.imaginePage.step4.icon}></i></div>
                            <h3 className="imagine-step-title">{texts.es.imaginePage.step4.title}</h3>
                            <p className="imagine-step-description">{texts.es.imaginePage.step4.description}</p>
                        </div>
                    </div>

                    {/* Stats Section */}
                    <div className="stats-section" ref={statsSectionRef}>
                        <h2 className="text-3xl font-bold mb-8 text-dez-dark-text">{texts.es.imaginePage.stats.title}</h2>
                        <div className="stats-grid">
                            <div className="stat-item">
                                <span className="stat-number">{texts.es.imaginePage.stats.stat1.split(' ')[0]}</span>
                                <span>{texts.es.imaginePage.stats.stat1.split(' ').slice(1).join(' ')}</span>
                            </div>
                            <div className="stat-item">
                                <span className="stat-number">{texts.es.imaginePage.stats.stat2.split(' ')[0]}</span>
                                <span>{texts.es.imaginePage.stats.stat2.split(' ').slice(1).join(' ')}</span>
                            </div>
                            <div className="stat-item">
                                <span className="stat-number">{texts.es.imaginePage.stats.stat3.split(' ')[0]}</span>
                                <span>{texts.es.imaginePage.stats.stat3.split(' ').slice(1).join(' ')}</span>
                            </div>
                            <div className="stat-item">
                                <span className="stat-number">{texts.es.imaginePage.stats.stat4.split(' ')[0]}</span>
                                <span>{texts.es.imaginePage.stats.stat4.split(' ').slice(1).join(' ')}</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // New component: CalendarWidget
        const CalendarWidget = ({
            currentDisplayDate,
            selectedDate,
            unavailableDates,
            onDateSelect,
            changeMonth,
            texts,
            isAdmin = false
        }) => {
            const calendarMonths = [
                'ENERO', 'FEBRERO', 'MARZO', 'ABRIL', 'MAYO', 'JUNIO',
                'JULIO', 'AGOSTO', 'SEPTIEMBRE', 'OCTUBRE', 'NOVIEMBRE', 'DICIEMBRE'
            ];
            const weekdays = ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'];
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const getDaysInMonth = (year, month) => new Date(year, month + 1, 0).getDate();
            const getFirstDayOfMonth = (year, month) => new Date(year, month, 1).getDay();

            const renderDays = useCallback(() => {
                const days = [];
                const year = currentDisplayDate.getFullYear();
                const month = currentDisplayDate.getMonth();

                const firstDayIndex = getFirstDayOfMonth(year, month);
                const daysInMonth = getDaysInMonth(year, month);
                const daysInPrevMonth = getDaysInMonth(year, month - 1);

                // Days of the previous month
                for (let i = 0; i < firstDayIndex; i++) {
                    days.push({
                        date: new Date(year, month - 1, daysInPrevMonth - firstDayIndex + 1 + i),
                        isCurrentMonth: false,
                        isDisabled: true
                    });
                }

                // Days of the current month
                for (let i = 1; i <= daysInMonth; i++) {
                    const date = new Date(year, month, i);
                    date.setHours(0, 0, 0, 0);
                    const dateString = date.toISOString().split('T')[0];

                    let isDisabled = false;
                    let isSelected = false;

                    if (isAdmin) {
                        isDisabled = date.getDay() === 0; // Sundays disabled in admin
                        isSelected = unavailableDates.includes(dateString); // Marked as unavailable
                    } else {
                        isDisabled = date.getTime() < today.getTime() || date.getDay() === 0 || unavailableDates.includes(dateString);
                        isSelected = selectedDate && date.getTime() === selectedDate.getTime();
                    }

                    days.push({
                        date: date,
                        isCurrentMonth: true,
                        isToday: date.getTime() === today.getTime(),
                        isDisabled: isDisabled,
                        isSelected: isSelected,
                        dateString: dateString
                    });
                }

                // Days of the next month to complete the grid
                const totalDaysDisplayed = days.length;
                const remainingCells = 42 - totalDaysDisplayed;

                for (let i = 1; i <= remainingCells; i++) {
                    days.push({
                        date: new Date(year, month + 1, i),
                        isCurrentMonth: false,
                        isDisabled: true
                    });
                }

                return days;
            }, [currentDisplayDate, selectedDate, unavailableDates, isAdmin]);

            const days = renderDays();

            return (
                <div className="calendar-widget">
                    <div className="calendar-header">
                        <button type="button" className="calendar-nav" onClick={() => changeMonth(-1)}>‹</button>
                        <div>
                            <span className="calendar-month">{calendarMonths[currentDisplayDate.getMonth()]}</span> <span className="calendar-year">{currentDisplayDate.getFullYear()}</span>
                        </div>
                        <button type="button" className="calendar-nav" onClick={() => changeMonth(1)}>›</button>
                    </div>
                    <div className="calendar-grid">
                        {weekdays.map(day => (
                            <div key={day} className="calendar-day-header">{day}</div>
                        ))}
                        {days.map((day, index) => (
                            <div
                                key={index}
                                className={`calendar-day ${day.isCurrentMonth ? '' : 'other-month'} ${day.isToday && day.isCurrentMonth ? 'current-day' : ''} ${day.isDisabled ? 'disabled' : ''} ${day.isSelected ? (isAdmin ? 'unavailable selected' : 'selected') : ''}`}
                                onClick={() => !day.isDisabled && onDateSelect(day.date, day.dateString)}
                            >
                                {day.date.getDate()}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };


        // New component: TimeSlots
        const TimeSlots = ({ selectedDate, onSelectTime, texts, blockedTimes = [] }) => {
            // Generate time slots from 10 AM (10) to 10 PM (22) in 24-hour format for internal logic
            const timeSlots24h = [];
            for (let hour = 10; hour <= 22; hour++) {
                timeSlots24h.push(`${String(hour).padStart(2, '0')}:00`);
            }

            const [selectedTime, setSelectedTime] = useState(null); // Stores time in 24h format

            const handleTimeClick = (time24h) => {
                setSelectedTime(time24h);
                onSelectTime(time24h); // Pass time in 24h format to parent component
            };

            return (
                <div className="time-slots-container">
                    <h3 className="text-center font-semibold mb-4 text-dez-dark-text">Select a time for {selectedDate.toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric', month: 'long' })}</h3>
                    <div className="time-slots-grid">
                        {timeSlots24h.map(time24h => {
                            const displayHour = parseInt(time24h.split(':')[0]);
                            const ampm = displayHour >= 12 ? 'PM' : 'AM';
                            const formattedDisplayTime = `${String(displayHour > 12 ? displayHour - 12 : displayHour).padStart(2, '0')}:00 ${ampm}`;
                            const isDisabled = blockedTimes.includes(time24h); // Check if time is blocked

                            return (
                                <button
                                    type="button"
                                    key={time24h}
                                    className={`time-slot-button ${selectedTime === time24h ? 'selected' : ''} ${isDisabled ? 'disabled' : ''}`}
                                    onClick={() => !isDisabled && handleTimeClick(time24h)}
                                    disabled={isDisabled}
                                >
                                    {formattedDisplayTime}
                                </button>
                            );
                        })}
                    </div>
                </div>
            );
        };


        // OrderPage Component
        const OrderPage = ({ setCurrentPage, planName, texts, unavailableDates }) => {
            const addressInputRef = useRef(null);
            const [isGoogleMapsLoaded, setIsGoogleMapsLoaded] = useState(false);

            // Dynamically load Google Maps script
            useEffect(() => {
                const googleMapsScriptId = 'google-maps-script';
                if (!document.getElementById(googleMapsScriptId)) {
                    const script = document.createElement('script');
                    script.id = googleMapsScriptId;
                    // Replace with your actual Google Maps API key
                    script.src = `https://maps.googleapis.com/maps/api/js?key=AIzaSyCmNPCFuAx1ns5EumIuyGwErNMCGXBAdHM&libraries=places`;
                    script.async = true;
                    script.defer = true;
                    script.onload = () => setIsGoogleMapsLoaded(true);
                    script.onerror = () => console.error("Error loading Google Maps script.");
                    document.head.appendChild(script);
                } else {
                    setIsGoogleMapsLoaded(true); // Script already exists
                }
            }, []);

            // Initialize Google Maps Autocomplete once the script loads
            useEffect(() => {
                if (isGoogleMapsLoaded && addressInputRef.current && window.google && window.google.maps && window.google.maps.places) {
                    const autocomplete = new google.maps.places.Autocomplete(addressInputRef.current, {
                        types: ['address'], // Restrict to address results
                        componentRestrictions: { 'country': ['do'] } // Restrict to Dominican Republic
                    });

                    autocomplete.addListener('place_changed', () => {
                        const place = autocomplete.getPlace();
                        if (!place.geometry) {
                            console.log("No details available for input: '" + place.name + "'");
                            setMeetingAddress(addressInputRef.current.value); // Still capture what user typed
                            return;
                        }
                        setMeetingAddress(place.formatted_address);
                        addressInputRef.current.value = place.formatted_address;
                        console.log("Selected address:", place.formatted_address);
                    });
                } else if (isGoogleMapsLoaded) {
                    console.error("Google Maps API or Places library not fully available after script load.");
                }
            }, [isGoogleMapsLoaded]);


            // States for form data
            const [personName, setPersonName] = useState(''); // Changed from companyName
            const [meetingAddress, setMeetingAddress] = useState('');
            const [selectedDate, setSelectedDate] = useState(null); // Stores a Date object
            const [selectedTime, setSelectedTime] = useState(''); // Stores time in 24h format
            const [isModalVisible, setIsModalVisible] = useState(false);
            const [messageModalContent, setMessageModalContent] = useState({ title: '', details: '' });
            const [phoneNumber, setPhoneNumber] = useState(''); // Added phoneNumber state
            const [blockedTimes, setBlockedTimes] = useState([]); // New state for blocked times


            // Calendar state
            const [currentCalendarDisplayDate, setCurrentCalendarDisplayDate] = useState(new Date(new Date().getFullYear(), new Date().getMonth(), 1));

            const handleDateSelect = useCallback((dateObj, dateString) => {
                setSelectedDate(dateObj);
                setSelectedTime(''); // Reset time when a new day is selected
            }, []);

            const changeMonth = useCallback((direction) => {
                const newDate = new Date(currentCalendarDisplayDate.getFullYear(), currentCalendarDisplayDate.getMonth() + direction, 1);
                const today = new Date(); // Define today inside useCallback
                today.setHours(0, 0, 0, 0);

                const firstDayOfTodayMonth = new Date(today.getFullYear(), today.getMonth(), 1);

                if (newDate.getTime() < firstDayOfTodayMonth.getTime()) {
                    setCurrentCalendarDisplayDate(new Date(today.getFullYear(), today.getMonth(), 1));
                } else {
                    setCurrentCalendarDisplayDate(newDate);
                }
                setSelectedDate(null); // Reset selected date when month changes
                setSelectedTime(''); // Reset selected time when month changes
                setBlockedTimes([]); // Clear blocked times when month changes
            }, [currentCalendarDisplayDate]);

            const handleSelectTime = useCallback((time) => {
                setSelectedTime(time); // time is in 24h format
            }, []);

            // Effect to get blocked times for the selected date (now purely local simulation)
            useEffect(() => {
                // This effect is now a placeholder. In a real application without Firebase,
                // you would fetch blocked times from an API or manage them locally.
                if (selectedDate) {
                    // Simulate some blocked times for demonstration
                    const simulatedBlockedTimes = [];
                    // Example: Block 11:00 and 15:00 on any selected date
                    // if (selectedDate.getDate() % 2 === 0) { // Example: block on even days
                    //     simulatedBlockedTimes.push('11:00', '15:00');
                    // }
                    setBlockedTimes(simulatedBlockedTimes);
                } else {
                    setBlockedTimes([]);
                }
            }, [selectedDate]);


            // Phone dialer functionality
            const addDigit = useCallback((digit) => {
                if (/\d/.test(digit) && phoneNumber.replace(/\D/g, '').length < 10) {
                    setPhoneNumber(prev => prev + digit);
                } else if (!/\d/.test(digit) && phoneNumber.length < 15) {
                    setPhoneNumber(prev => prev + digit);
                }
            }, [phoneNumber]);

            const clearNumber = useCallback(() => {
                setPhoneNumber('');
            }, []);

            // Modal functions
            const showMessageModal = useCallback((title, details) => {
                setIsModalVisible(true);
                setMessageModalContent({ title, details });
                document.body.style.overflow = 'hidden';
            }, []);

            const hideMessageModal = useCallback(() => {
                setIsModalVisible(false);
                document.body.style.overflow = '';
                // Only redirect to home page if it's the "Thank You" message
                if (messageModalContent.title === texts.es.orderPage.thankYou) {
                    setPersonName(''); // Changed from companyName
                    setMeetingAddress('');
                    setSelectedDate(null);
                    setSelectedTime('');
                    setPhoneNumber('');
                    setCurrentCalendarDisplayDate(new Date(new Date().getFullYear(), new Date().getMonth(), 1)); // Reset calendar view
                    setCurrentPage('home'); // Redirect to home page
                }
            }, [messageModalContent.title, texts, setCurrentPage]);


            // Form submission logic
            const handleSubmit = useCallback(async (e) => {
                e.preventDefault();

                console.log("handleSubmit called. Current state for validation:");
                console.log("Person Name:", personName); // Changed from companyName
                console.log("Meeting Address:", meetingAddress);
                console.log("Selected Date:", selectedDate);
                console.log("Selected Time:", selectedTime);
                console.log("Phone Number:", phoneNumber);


                if (!personName.trim()) { // Changed from companyName
                    showMessageModal("Error", texts.es.orderPage.alertPerson); // Alert changed
                    return;
                }
                if (!meetingAddress.trim()) {
                    showMessageModal("Error", texts.es.orderPage.alertAddress);
                    return;
                }
                if (!selectedDate) {
                    showMessageModal("Error", texts.es.orderPage.alertDate);
                    return;
                }
                if (!selectedTime) {
                    showMessageModal("Error", texts.es.orderPage.alertTime);
                    return;
                }
                if (!phoneNumber.trim() || phoneNumber.replace(/\D/g, '').length !== 10) {
                    showMessageModal("Error", texts.es.orderPage.alertPhone);
                    return;
                }

                // In a real application without Firebase, you would send this data to your backend API here.
                // For this demonstration, we'll just show the success modal.
                console.log("Order data (not saved to DB):", {
                    planName: planName,
                    personName: personName,
                    meetingAddress: meetingAddress,
                    selectedDate: selectedDate.toISOString().split('T')[0],
                    selectedTime: selectedTime,
                    phoneNumber: phoneNumber,
                    orderDate: new Date().toISOString(), // Use local timestamp
                    status: 'pending'
                });

                showMessageModal(
                    texts.es.orderPage.thankYou,
                    <div className="text-left">
                        <p className="mb-4">{texts.es.orderPage.modalMessage}</p>
                        <p className="font-bold mb-2">{texts.es.orderPage.bookingDetails}</p>
                        <ul className="list-none p-0">
                            <li><strong>{texts.es.orderPage.modalPerson}</strong> {personName}</li> {/* Changed from modalCompany */}
                            <li><strong>{texts.es.orderPage.modalAddress}</strong> {meetingAddress}</li>
                            <li><strong>{texts.es.orderPage.modalDate}</strong> {selectedDate.toLocaleDateString('es-ES', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</li>
                            <li><strong>{texts.es.orderPage.modalTime}</strong> {selectedTime}</li>
                            <li><strong>{texts.es.orderPage.modalPhone}</strong> {phoneNumber}</li>
                        </ul>
                    </div>
                );

            }, [personName, meetingAddress, selectedDate, selectedTime, phoneNumber, showMessageModal, texts, setCurrentPage, planName]);


            return (
                <div className="order-page pt-24 px-10 main-page-card">
                    <button type="button" onClick={() => setCurrentPage('home')} className="fixed top-24 left-10 py-2 px-4 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors duration-300 z-40">
                        <i className="fas fa-arrow-left mr-2"></i> {texts.es.detailedServicesPage.backButton}
                    </button>
                    <div className="order-header">
                        <h1 className="order-title">{texts.es.orderPage.title}</h1>
                        <div className="inline-block bg-opacity-10 backdrop-blur-xl rounded-2xl p-4 mt-5 text-dez-dark-text font-bold text-lg">
                            <i className="fas fa-check-circle inline-block align-middle mr-3"></i> {/* Image of a checkmark in a circle */}
                            {planName}
                        </div>
                    </div>

                    <div className="form-container">
                        <form id="orderForm" onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">{texts.es.orderPage.selectDateTime}</label>
                            </div>

                            <div className="form-group">
                                <label htmlFor="personNameInput" className="form-label">{texts.es.orderPage.personName}</label>
                                <input type="text" id="personNameInput" className="form-input" placeholder={texts.es.orderPage.personPlaceholder} value={personName} onChange={(e) => setPersonName(e.target.value)} />
                            </div>

                            <div className="form-group">
                                <label htmlFor="addressInput" className="form-label">{texts.es.orderPage.meetingAddress}</label>
                                <input type="text" id="addressInput" className="form-input" placeholder={texts.es.orderPage.addressPlaceholder} ref={addressInputRef} value={meetingAddress} onChange={(e) => setMeetingAddress(e.target.value)} />
                            </div>

                            <div className="form-group">
                                <label className="form-label">{texts.es.orderPage.meetingDay}</label>
                                <CalendarWidget
                                    currentDisplayDate={currentCalendarDisplayDate}
                                    selectedDate={selectedDate}
                                    unavailableDates={unavailableDates}
                                    onDateSelect={handleDateSelect}
                                    changeMonth={changeMonth}
                                    texts={texts}
                                />
                                {selectedDate && (
                                    <TimeSlots selectedDate={selectedDate} onSelectTime={handleSelectTime} texts={texts} blockedTimes={blockedTimes} />
                                )}
                            </div>

                            <div className="form-group">
                                <label className="form-label">{texts.es.orderPage.phoneNumber}</label>
                                <div className="phone-dialer">
                                    <div className="phone-display" id="phoneDisplay">
                                        {phoneNumber || texts.es.orderPage.enterNumber}
                                    </div>
                                    <div className="phone-keypad">
                                        <button type="button" className="phone-key" onClick={() => addDigit('1')}>1</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('2')}>2</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('3')}>3</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('4')}>4</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('5')}>5</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('6')}>6</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('7')}>7</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('8')}>8</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('9')}>9</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('*')}>*</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('0')}>0</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('#')}>#</button>
                                    </div>
                                    <div className="phone-actions">
                                        <button type="button" className="phone-action clear" onClick={clearNumber}>
                                            {/* Image of a backspace icon */}
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6">
                                                <path fillRule="evenodd" d="M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z" clipRule="evenodd" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div className="payment-info">
                                <p className="mb-6 text-dez-gray-text text-lg font-semibold">{texts.es.orderPage.paymentMethodsTitle}</p>
                                <div className="payment-methods">
                                    <div className="payment-method-box">
                                        <h3 className="method-title paypal-gradient">{texts.es.orderPage.paypal}</h3>
                                        <p className="method-detail"><strong className="detail-highlight">{texts.es.orderPage.paypalEmail} Joshua.5@hotmail.es</strong></p>
                                    </div>
                                    <div className="payment-method-box">
                                        <h3 className="method-title zelle-gradient">{texts.es.orderPage.zelle}</h3>
                                        <p className="method-detail"><strong className="detail-highlight">{texts.es.orderPage.zelleNumber} 347-782-3215</strong></p>
                                    </div>
                                    <div className="payment-method-box">
                                        <h3 className="method-title banreservas-title">
                                            {texts.es.orderPage.bankTransfer}
                                        </h3>
                                        <p className="method-detail inline">
                                            <strong className="detail-highlight">{texts.es.orderPage.bank} BanReservas</strong> <br/> <strong className="detail-highlight">{texts.es.orderPage.account} 9602303316</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" className="submit-button">
                                {texts.es.orderPage.acceptButton}
                            </button>
                        </form>
                    </div>

                    {/* Custom message modal */}
                    {isModalVisible && (
                        <div className="modal-overlay show">
                            <div className="modal-content">
                                <h2 className="modal-title">{messageModalContent.title}</h2>
                                <div className="modal-details">{messageModalContent.details}</div>
                                <button type="button" className="modal-close-button" onClick={hideMessageModal}>
                                    {texts.es.orderPage.closeButton}
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // New component: ProcessedPage (similar to OrderPage but without address)
        const ProcessedPage = ({ setCurrentPage, serviceTitle, texts, unavailableDates, prices }) => {
            // States for form data
            const [personName, setPersonName] = useState('');
            const [selectedDate, setSelectedDate] = useState(null); // Stores a Date object
            const [selectedTime, setSelectedTime] = useState(''); // Stores time in 24h format
            const [phoneNumber, setPhoneNumber] = useState('');
            const [isModalVisible, setIsModalVisible] = useState(false);
            const [messageModalContent, setMessageModalContent] = useState({ title: '', details: '', showScheduleOption: false });
            const [paymentInitiated, setPaymentInitiated] = useState(false); // New state to track if payment has been initiated
            const [blockedTimes, setBlockedTimes] = useState([]); // New state for blocked times

            const today = new Date(); // Define today inside the component
            today.setHours(0, 0, 0, 0);

            // Determine if date/time is required based on service category
            const requiresDateTime = !['software', 'otros'].includes(serviceTitle.category);

            // Calendar state
            const [currentCalendarDisplayDate, setCurrentCalendarDisplayDate] = useState(new Date(new Date().getFullYear(), new Date().getMonth(), 1));

            const handleDateSelect = useCallback((dateObj, dateString) => {
                setSelectedDate(dateObj);
                setSelectedTime(''); // Reset time when a new day is selected
            }, []);

            const changeMonth = useCallback((direction) => {
                const newDate = new Date(currentCalendarDisplayDate.getFullYear(), currentCalendarDisplayDate.getMonth() + direction, 1);
                const firstDayOfTodayMonth = new Date(today.getFullYear(), today.getMonth(), 1);

                if (newDate.getTime() < firstDayOfTodayMonth.getTime()) {
                    setCurrentCalendarDisplayDate(new Date(today.getFullYear(), today.getMonth(), 1));
                } else {
                    setCurrentCalendarDisplayDate(newDate);
                }
                setSelectedDate(null); // Reset selected date when month changes
                setSelectedTime(''); // Reset selected time when month changes
                setBlockedTimes([]); // Clear blocked times when month changes
            }, [currentCalendarDisplayDate]);

            const handleSelectTime = useCallback((time) => {
                setSelectedTime(time); // time is in 24h format
            }, []);

            // Effect to get blocked times for the selected date (now purely local simulation)
            useEffect(() => {
                // This effect is now a placeholder.
                if (selectedDate) {
                    const simulatedBlockedTimes = [];
                    // Example: Block 12:00 and 16:00 on any selected date
                    // if (selectedDate.getDate() % 3 === 0) { // Example: block on days divisible by 3
                    //     simulatedBlockedTimes.push('12:00', '16:00');
                    // }
                    setBlockedTimes(simulatedBlockedTimes);
                } else {
                    setBlockedTimes([]);
                }
            }, [selectedDate]);

            // Phone dialer functionality
            const addDigit = useCallback((digit) => {
                if (/\d/.test(digit) && phoneNumber.replace(/\D/g, '').length < 10) {
                    setPhoneNumber(prev => prev + digit);
                } else if (!/\d/.test(digit) && phoneNumber.length < 15) {
                    setPhoneNumber(prev => prev + digit);
                }
            }, [phoneNumber]);

            const clearNumber = useCallback(() => {
                setPhoneNumber('');
            }, []);

            // Helper to format date for iCalendar DTSTART/DTEND
            const formatDateTimeForIcs = (date, time) => {
                if (!date || !time) return '';
                const [hour, minute] = time.split(':');
                const dt = new Date(date);
                dt.setHours(parseInt(hour), parseInt(minute), 0, 0);
                // Format toYYYYMMDDTHHMMSSZ (UTC)
                return dt.toISOString().replace(/[-:]|\.\d{3}/g, '');
            };

            // Function to generate an iCalendar event
            const generateCalendarEvent = useCallback(() => {
                if (!selectedDate || !selectedTime || !serviceTitle || !personName) {
                    console.error("Missing data for calendar event generation.");
                    return;
                }

                const startDate = new Date(selectedDate);
                const [hour, minute] = selectedTime.split(':').map(Number);
                startDate.setHours(hour, minute, 0, 0);

                const endDate = new Date(startDate);
                endDate.setHours(startDate.getHours() + 1); // Assuming a 1-hour meeting

                const formattedStart = formatDateTimeForIcs(startDate, selectedTime);
                const formattedEnd = formatDateTimeForIcs(endDate, selectedTime); // Use original time for end date format
                const now = new Date().toISOString().replace(/[-:]|\.\d{3}/g, '');
                const uid = `${now}-${Math.random().toString(36).substring(2, 15)}`;

                const calendarContent = [
                    'BEGIN:VCALENDAR',
                    'VERSION:2.0',
                    'PRODID:-//Dezgital//NONSGML v1.0//EN',
                    'BEGIN:VEVENT',
                    `UID:${uid}`,
                    `DTSTAMP:${now}`,
                    `DTSTART:${formattedStart}`,
                    `DTEND:${formattedEnd}`,
                    `SUMMARY:Dezgital Service Meeting - ${texts.es.detailedServicesPage.categoryHeaders[serviceTitle.category]} - ${serviceTitle.title}`,
                    `DESCRIPTION:Service: ${texts.es.detailedServicesPage.categoryHeaders[serviceTitle.category]} - ${serviceTitle.title}\\nPerson: ${personName}\\nPhone: ${phoneNumber}`,
                    'END:VEVENT',
                    'END:VCALENDAR'
                ].join('\n');

                const blob = new Blob([calendarContent], { type: 'text/calendar;charset=utf-8' });
                const url = URL.createObjectURL(blob);

                const a = document.createElement('a');
                a.href = url;
                a.download = `Dezgital_Meeting_${serviceTitle.title}.ics`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                // Redirect to home page after calendar download attempt
                setTimeout(() => setCurrentPage('home'), 500); // Small delay for download to initiate
            }, [selectedDate, selectedTime, serviceTitle, personName, phoneNumber, texts, setCurrentPage]);


            // Modal functions
            const showMessageModal = useCallback((title, details, showScheduleOption = false) => {
                setIsModalVisible(true);
                setMessageModalContent({ title, details, showScheduleOption });
                document.body.style.overflow = 'hidden';
            }, []);

            const hideMessageModal = useCallback(() => {
                setIsModalVisible(false);
                document.body.style.overflow = '';
                // Only redirect to home page if it's the "Thank You" message
                if (messageModalContent.title === texts.es.processedPage.thankYou) {
                    setCurrentPage('home');
                }
            }, [messageModalContent.title, texts, setCurrentPage]);

            // Handle payment button clicks
            const handlePaymentClick = useCallback((method) => {
                setPaymentInitiated(true); // Mark payment as initiated
                let message = '';
                switch (method) {
                    case 'applePay':
                        message = texts.es.processedPage.paymentApplePayDetails;
                        break;
                    case 'paypal':
                        message = texts.es.processedPage.paymentPayPalDetails;
                        break;
                    case 'zelle':
                        message = texts.es.processedPage.paymentZelleDetails;
                        break;
                    default:
                        message = texts.es.processedPage.paymentInitiated;
                }
                showMessageModal("Payment", message);
            }, [showMessageModal, texts]);


            // Form submission logic
            const handleSubmit = useCallback(async (e) => {
                e.preventDefault();

                console.log("handleSubmit called. Current state for validation:");
                console.log("Person Name:", personName);
                console.log("Selected Date:", selectedDate);
                console.log("Selected Time:", selectedTime);
                console.log("Phone Number:", phoneNumber);
                console.log("Payment Initiated:", paymentInitiated);


                if (!personName.trim()) {
                    showMessageModal("Error", texts.es.processedPage.alertPerson);
                    return;
                }

                // Conditional validation for date and time
                if (requiresDateTime) {
                    if (!selectedDate) {
                        showMessageModal("Error", texts.es.processedPage.alertDate);
                        return;
                    }
                    if (!selectedTime) {
                        showMessageModal("Error", texts.es.processedPage.alertTime);
                        return;
                    }
                } else {
                    // If date/time not required, ensure they are null/empty for modal
                    setSelectedDate(null);
                    setSelectedTime('');
                }

                if (!phoneNumber.trim() || phoneNumber.replace(/\D/g, '').length !== 10) {
                    showMessageModal("Error", texts.es.processedPage.alertPhone);
                    return;
                }
                if (!paymentInitiated) {
                    showMessageModal("Error", texts.es.processedPage.selectPaymentMethod);
                    return;
                }

                // In a real application without Firebase, you would send this data to your backend API here.
                // For this demonstration, we'll just show the success modal.
                console.log("Processed order data (not saved to DB):", {
                    serviceCategory: serviceTitle.category,
                    serviceTitle: serviceTitle.title,
                    personName: personName,
                    selectedDate: selectedDate ? selectedDate.toISOString().split('T')[0] : null,
                    selectedTime: selectedTime || null,
                    phoneNumber: phoneNumber,
                    orderDate: new Date().toISOString(), // Use local timestamp
                    status: 'pending',
                    totalAmount: serviceTitle.totalAmount // Use the totalAmount from the customized serviceTitle
                });

                showMessageModal(
                    texts.es.processedPage.thankYou,
                    <div className="text-left">
                        <p className="mb-4">{texts.es.processedPage.modalMessage}</p>
                        <p className="font-bold mb-2">{texts.es.processedPage.bookingDetails}</p>
                        <ul className="list-none p-0">
                            <li><strong>{texts.es.processedPage.modalPerson}</strong> {personName}</li>
                            <li><strong>{texts.es.processedPage.modalService}</strong> {texts.es.detailedServicesPage.categoryHeaders[serviceTitle.category]} - {serviceTitle.title}</li>
                            {requiresDateTime ? (
                                <>
                                    <li><strong>{texts.es.processedPage.modalDate}</strong> {selectedDate?.toLocaleDateString('es-ES', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</li>
                                    <li><strong>{texts.es.processedPage.modalTime}</strong> {selectedTime}</li>
                                </>
                            ) : (
                                <li><strong>{texts.es.processedPage.noDateTimeRequired}</strong></li>
                            )}
                            <li><strong>{texts.es.processedPage.modalPhone}</strong> {phoneNumber}</li>
                            {/* Display customization details if available */}
                            {serviceTitle.customizationDetails && (
                                Object.entries(serviceTitle.customizationDetails).map(([key, value]) => (
                                    <li key={key}><strong>{key === 'photoCount' ? 'Fotos:' : key === 'videoDuration' ? 'Duración:' : key === 'chooseLocation' ? 'Zona Elegida:' : key === 'pageCount' ? 'Páginas:' : key}:</strong> {typeof value === 'boolean' ? (value ? 'Sí' : 'No') : value}</li>
                                ))
                            )}
                        </ul>
                    </div>,
                    requiresDateTime // Only show schedule option if date/time was required
                );

            }, [personName, selectedDate, selectedTime, phoneNumber, paymentInitiated, showMessageModal, texts, serviceTitle, requiresDateTime]);

            // Calculate 50% of service price
            const servicePrice = serviceTitle.totalAmount; // Use the totalAmount from the customized serviceTitle
            const halfPrice = (servicePrice / 2).toLocaleString('es-ES', { style: 'currency', currency: 'USD' });
            const formattedTotalPrice = servicePrice.toLocaleString('es-ES', { style: 'currency', currency: 'USD' });


            return (
                <div className="processed-page pt-24 px-10 main-page-card">
                    <button type="button" onClick={() => setCurrentPage('home')} className="fixed top-24 left-10 py-2 px-4 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors duration-300 z-40">
                        <i className="fas fa-arrow-left mr-2"></i> {texts.es.detailedServicesPage.backButton}
                    </button>
                    <div className="order-header">
                        <h1 className="order-title">{texts.es.processedPage.title}</h1>
                        {/* Adjusted margin-top for the service title div */}
                        <div className="inline-block bg-opacity-10 backdrop-blur-xl rounded-2xl p-4 mt-2 text-dez-dark-text font-bold text-lg">
                            <i className="fas fa-check-circle inline-block align-middle mr-3"></i> {/* Image of a checkmark in a circle */}
                            {texts.es.detailedServicesPage.categoryHeaders[serviceTitle.category]} - {serviceTitle.title}
                        </div>
                    </div>

                    {/* Adjusted margin-top for the form container */}
                    <div className="form-container mt-4"> {/* Changed mt-8 to mt-4 */}
                        <form id="processedForm" onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">{texts.es.processedPage.selectDateTime}</label>
                            </div>

                            <div className="form-group">
                                <label htmlFor="personNameInput" className="form-label">{texts.es.processedPage.personName}</label>
                                <input type="text" id="personNameInput" className="form-input" placeholder={texts.es.processedPage.personPlaceholder} value={personName} onChange={(e) => setPersonName(e.target.value)} />
                            </div>

                            {requiresDateTime && (
                                <div className="form-group">
                                    <label className="form-label">{texts.es.processedPage.meetingDay}</label>
                                    <CalendarWidget
                                        currentDisplayDate={currentCalendarDisplayDate}
                                        selectedDate={selectedDate}
                                        unavailableDates={unavailableDates}
                                    onDateSelect={handleDateSelect}
                                        changeMonth={changeMonth}
                                        texts={texts}
                                    />
                                    {selectedDate && (
                                        <TimeSlots selectedDate={selectedDate} onSelectTime={handleSelectTime} texts={texts} blockedTimes={blockedTimes} />
                                    )}
                                </div>
                            )}

                            <div className="form-group">
                                <label className="form-label">{texts.es.processedPage.phoneNumber}</label>
                                <div className="phone-dialer">
                                    <div className="phone-display" id="phoneDisplay">
                                        {phoneNumber || texts.es.processedPage.enterNumber}
                                    </div>
                                    <div className="phone-keypad">
                                        <button type="button" className="phone-key" onClick={() => addDigit('1')}>1</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('2')}>2</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('3')}>3</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('4')}>4</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('5')}>5</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('6')}>6</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('7')}>7</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('8')}>8</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('9')}>9</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('*')}>*</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('0')}>0</button>
                                        <button type="button" className="phone-key" onClick={() => addDigit('#')}>#</button>
                                    </div>
                                    <div className="phone-actions">
                                        <button type="button" className="phone-action clear" onClick={clearNumber}>
                                            {/* Image of a backspace icon */}
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6">
                                                <path fillRule="evenodd" d="M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z" clipRule="evenodd" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            {/* Payment summary and express checkout */}
                            <div className="text-center mt-8">
                                <h2 className="text-xl font-bold mb-2 text-dez-dark-text">{texts.es.processedPage.totalAmount} {formattedTotalPrice}</h2>
                                <p className="text-lg text-dez-gray-text mb-6">{texts.es.processedPage.halfPaymentMessage} <strong className="text-dez-primary">{halfPrice}</strong></p>
                            </div>

                            <div className="text-center mb-8">
                                <h2 className="text-2xl font-bold mb-4 text-dez-dark-text">{texts.es.processedPage.expressCheckout}</h2>
                                <div className="flex justify-center gap-4 w-full max-w-xs">
                                    {/* PayPal, Apple Pay, G Pay, Zelle */}
                                    <button type="button" onClick={() => handlePaymentClick('paypal')} className="flex-1 bg-yellow-500 text-white py-3 px-2 rounded-lg text-lg font-semibold transition-all duration-300 hover:bg-yellow-600 hover:shadow-lg">
                                        PayPal
                                    </button>
                                    <button type="button" onClick={() => handlePaymentClick('applePay')} className="flex-1 bg-black text-white py-3 px-2 rounded-lg text-lg font-semibold flex items-center justify-center gap-1 transition-all duration-300 hover:bg-gray-800 hover:shadow-lg">
                                        <i className="fab fa-apple"></i> {/* Image of an apple icon */}
                                        Pay
                                    </button>
                                    <button type="button" onClick={() => handlePaymentClick('zelle')} className="flex-1 bg-orange-500 text-white py-3 px-2 rounded-lg text-lg font-semibold flex items-center justify-center gap-1 transition-all duration-300 hover:bg-orange-600 hover:shadow-lg">
                                        Zelle
                                    </button>
                                </div>
                            </div>

                            <p className="text-center text-dez-gray-text mt-6 mb-8">{texts.es.processedPage.or}</p>

                            <div className="payment-info">
                                <p className="mb-6 text-dez-gray-text text-lg font-semibold">{texts.es.processedPage.paymentMethodsTitle}</p>
                                <div className="payment-methods">
                                    <div className="payment-method-box">
                                        <h3 className="method-title paypal-gradient">{texts.es.processedPage.paypal}</h3>
                                        <p className="method-detail"><strong className="detail-highlight">{texts.es.processedPage.paypalEmail} Joshua.5@hotmail.es</strong></p>
                                    </div>
                                    <div className="payment-method-box">
                                        <h3 className="method-title banreservas-title">
                                            {texts.es.processedPage.bankTransfer}
                                        </h3>
                                        <p className="method-detail inline">
                                            <strong className="detail-highlight">{texts.es.processedPage.bank} BanReservas</strong> <br/> <strong className="detail-highlight">{texts.es.processedPage.account} 9602303316</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" className="submit-button" disabled={!paymentInitiated}>
                                {texts.es.processedPage.proceedButton} {/* Changed to "Proceder" */}
                            </button>
                        </form>
                    </div>

                    {/* Custom message modal */}
                    {isModalVisible && (
                        <div className="modal-overlay show">
                            <div className="modal-content">
                                <h2 className="modal-title">{messageModalContent.title}</h2>
                                <div className="modal-details">{messageModalContent.details}</div>
                                {messageModalContent.showScheduleOption && (
                                    <div className="flex justify-center gap-4 mt-6">
                                        <button type="button" className="modal-close-button" onClick={generateCalendarEvent}>
                                            {texts.es.processedPage.yesSchedule}
                                        </button>
                                        <button type="button" className="modal-close-button bg-gray-600 hover:bg-gray-700" onClick={hideMessageModal}>
                                            {texts.es.processedPage.noThanks}
                                        </button>
                                    </div>
                                )}
                                {!messageModalContent.showScheduleOption && (
                                    <button type="button" className="modal-close-button" onClick={hideMessageModal}>
                                        {texts.es.processedPage.closeButton}
                                    </button>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // New component: AdminPage
        const AdminPage = ({ setCurrentPage, texts, unavailableDates, setUnavailableDates, prices, setPrices, currentLocation, setCurrentLocation, showToast }) => {
            const [activeSection, setActiveSection] = useState('orders'); // Default active section
            const [currentCalendarDisplayDate, setCurrentCalendarDisplayDate] = useState(new Date(new Date().getFullYear(), new Date().getMonth(), 1));
            const [selectedUnavailableDays, setSelectedUnavailableDays] = useState(unavailableDates); // Initialize with existing unavailable dates
            const [tempPrices, setTempPrices] = useState(prices); // Local state for price changes
            const [tempLocation, setTempLocation] = useState(currentLocation); // Local state for location changes
            const [userOrders, setUserOrders] = useState([]); // State to store fetched orders (now static)
            const [isSaving, setIsSaving] = useState(false); // New loading state for save operations
            const [isLoadingOrders, setIsLoadingOrders] = useState(false); // New loading state for fetching orders


            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const calendarMonths = [
                'ENERO', 'FEBRERO', 'MARZO', 'ABRIL', 'MAYO', 'JUNIO',
                'JULIO', 'AGOSTO', 'SEPTIEMBRE', 'OCTUBRE', 'NOVIEMBRE', 'DICIEMBRE'
            ];
            const weekdays = ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'];

            // No password modal or authentication needed anymore. Admin page is directly accessible.

            const handleAdminDateSelect = useCallback((dateObj, dateString) => {
                setSelectedUnavailableDays(prev => {
                    if (prev.includes(dateString)) {
                        return prev.filter(d => d !== dateString);
                    } else {
                        return [...prev, dateString];
                    }
                });
            }, []);

            const changeMonth = useCallback((direction) => {
                const newDate = new Date(currentCalendarDisplayDate.getFullYear(), currentCalendarDisplayDate.getMonth() + direction, 1);
                setCurrentCalendarDisplayDate(newDate);
            }, [currentCalendarDisplayDate]);

            const handleSaveUnavailableDays = async () => {
                setIsSaving(true); // Start loading
                try {
                    // In a real app, send this to your backend API
                    // For this demo, just update local state and show toast
                    setUnavailableDates(selectedUnavailableDays); // Update global state
                    showToast(texts.es.adminPage.saveSuccessDetails, "success");
                    console.log("Unavailable dates saved locally:", selectedUnavailableDays);
                } catch (error) {
                    console.error("Error saving unavailable dates locally:", error);
                    showToast(`Error saving unavailable days: ${error.message}`, "error");
                } finally {
                    setIsSaving(false); // End loading
                }
            };

            // Price management handlers
            const handlePriceChange = useCallback((key, value) => {
                setTempPrices(prev => ({
                    ...prev,
                    [key]: parseFloat(value) || 0 // Ensure it's a number
                }));
            }, []);

            const handleSavePrices = async () => {
                setIsSaving(true); // Start loading
                try {
                    // In a real app, send this to your backend API
                    setPrices(tempPrices); // Update global state
                    showToast(texts.es.adminPage.priceSavedSuccess, "success");
                    console.log("Prices saved locally:", tempPrices);
                } catch (error) {
                    console.error("Error saving prices locally:", error);
                    showToast(`Error saving prices: ${error.message}`, "error");
                } finally {
                    setIsSaving(false); // End loading
                }
            };

            // Location management handlers
            const handleLocationChange = useCallback((event) => {
                setTempLocation(event.target.value);
            }, []);

            const handleSaveLocation = async () => {
                setIsSaving(true); // Start loading
                try {
                    // In a real app, send this to your backend API
                    setCurrentLocation(tempLocation); // Update global state
                    showToast(texts.es.adminPage.locationSavedSuccess, "success");
                    console.log("Location saved locally:", tempLocation);
                } catch (error) {
                    console.error("Error saving location locally:", error);
                    showToast(`Error saving location: ${error.message}`, "error");
                } finally {
                    setIsSaving(false); // End loading
                }
            };

            // Function to delete an order (now only from local state)
            const handleDeleteOrder = async (orderId) => {
                if (!window.confirm(texts.es.adminPage.deleteOrderConfirm)) {
                    return; // Cancel if user does not confirm
                }

                setIsSaving(true); // Start loading
                try {
                    // In a real app, send delete request to backend API
                    setUserOrders(prevOrders => prevOrders.filter(order => order.id !== orderId));
                    showToast(texts.es.adminPage.deleteOrderSuccess, "success");
                    console.log("Order deleted locally:", orderId);
                } catch (error) {
                    console.error("Error deleting order locally:", error);
                    showToast(`${texts.es.adminPage.deleteOrderError}: ${error.message}`, "error");
                } finally {
                    setIsSaving(false); // End loading
                }
            };

            // Total amount of orders (now calculated from local state)
            const totalOrdersAmount = userOrders.reduce((sum, order) => {
                const amount = parseFloat(order.totalAmount || 0); // Ensure it's a number
                return sum + amount;
            }, 0).toLocaleString('es-ES', { style: 'currency', currency: 'USD' });


            // Orders are now static or managed through a local array for demonstration
            useEffect(() => {
                // Simulate fetching orders (e.g., from a predefined array)
                setIsLoadingOrders(true);
                const simulatedOrders = [
                    { id: '1', planName: 'Básico', personName: 'Juan Pérez', selectedDate: '2025-06-10', selectedTime: '10:00', totalAmount: 800, status: 'pending', orderDate: new Date('2025-06-01T10:00:00Z') },
                    { id: '2', serviceCategory: 'fotografia', serviceTitle: 'Studio', personName: 'Maria Garcia', selectedDate: '2025-06-15', selectedTime: '14:00', totalAmount: 200, status: 'completed', orderDate: new Date('2025-06-02T11:30:00Z') },
                    { id: '3', serviceCategory: 'software', serviceTitle: 'Página Web Informativa', personName: 'Carlos Ruiz', selectedDate: null, selectedTime: null, totalAmount: 1000, status: 'pending', orderDate: new Date('2025-06-03T09:00:00Z') },
                    { id: '4', planName: 'Empresarial - $2000', personName: 'Ana Lopez', selectedDate: '2025-06-20', selectedTime: '16:00', totalAmount: 2000, status: 'pending', orderDate: new Date('2025-06-04T14:00:00Z') }
                ];
                // Sort orders by date (most recent first)
                const sortedOrders = simulatedOrders.sort((a, b) => {
                    const dateA = a.orderDate ? a.orderDate.getTime() : 0;
                    const dateB = b.orderDate ? b.orderDate.getTime() : 0;
                    return dateB - dateA;
                });
                setUserOrders(sortedOrders);
                setIsLoadingOrders(false);
            }, []); // Empty dependency array means this runs once on mount


            return (
                <div className="admin-page pt-24 px-10 main-page-card">
                    <button type="button" onClick={() => setCurrentPage('home')} className="fixed top-24 left-10 py-2 px-4 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors duration-300 z-40">
                        <i className="fas fa-arrow-left mr-2"></i> Back to Home
                    </button>
                    <div className="admin-header">
                        <h1 className="admin-title">{texts.es.adminPage.title}</h1>
                        <p className="admin-subtitle">{texts.es.adminPage.subtitle}</p>
                    </div>

                    <div className="admin-container">
                        {/* Admin navigation tabs */}
                        <nav className="admin-nav">
                            <button
                                type="button"
                                className={`admin-nav-button ${activeSection === 'orders' ? 'active' : ''}`}
                                onClick={() => setActiveSection('orders')}
                            >
                                {texts.es.adminPage.ordersSectionTitle}
                            </button>
                            <button
                                type="button"
                                className={`admin-nav-button ${activeSection === 'unavailableDays' ? 'active' : ''}`}
                                onClick={() => setActiveSection('unavailableDays')}
                            >
                                {texts.es.adminPage.unavailableDaysSectionTitle}
                            </button>
                            <button
                                type="button"
                                className={`admin-nav-button ${activeSection === 'priceManagement' ? 'active' : ''}`}
                                onClick={() => setActiveSection('priceManagement')}
                            >
                                {texts.es.adminPage.priceManagementTitle}
                            </button>
                            <button
                                type="button"
                                className={`admin-nav-button ${activeSection === 'locationManagement' ? 'active' : ''}`}
                                onClick={() => setActiveSection('locationManagement')}
                            >
                                {texts.es.adminPage.locationManagementTitle}
                            </button>
                        </nav>

                        {/* Orders Section */}
                        {activeSection === 'orders' && (
                            <section className="admin-section">
                                <h2 className="admin-section-title">{texts.es.adminPage.ordersSectionTitle}</h2>
                                {isLoadingOrders ? (
                                    <p className="text-center text-dez-gray-text">Loading orders...</p>
                                ) : userOrders.length > 0 ? (
                                    <>
                                        <table className="orders-table">
                                            <thead>
                                                <tr>
                                                    <th>Type</th>
                                                    <th>Person</th>
                                                    <th>Date</th>
                                                    <th>Time</th>
                                                    <th>Amount</th>
                                                    <th>Status</th>
                                                    <th>Actions</th> {/* New column for actions */}
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {userOrders.map(order => (
                                                    <tr key={order.id}>
                                                        <td>{order.planName || `${order.serviceCategory} - ${order.serviceTitle}`}</td>
                                                        <td>{order.personName}</td>
                                                        <td>{order.selectedDate}</td>
                                                        <td>{order.selectedTime}</td>
                                                        <td>${order.totalAmount ? order.totalAmount.toLocaleString('es-ES') : 'N/A'}</td>
                                                        <td>{order.status}</td>
                                                        <td>
                                                            <button
                                                                type="button"
                                                                className="delete-order-btn"
                                                                onClick={() => handleDeleteOrder(order.id)}
                                                                disabled={isSaving}
                                                            >
                                                                Delete
                                                            </button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                        <div className="orders-total">
                                            {texts.es.adminPage.totalOrdersAmount} <span>{totalOrdersAmount}</span>
                                        </div>
                                    </>
                                ) : (
                                    <p className="text-dez-gray-text text-center">No orders registered.</p>
                                )}
                            </section>
                        )}

                        {/* Unavailable Days Section */}
                        {activeSection === 'unavailableDays' && (
                            <section className="admin-section">
                                <h2 className="admin-section-title">{texts.es.adminPage.unavailableDaysSectionTitle}</h2>
                                <p className="text-dez-gray-text text-center mb-4">{texts.es.adminPage.selectUnavailableDays}</p>
                                <CalendarWidget
                                    currentDisplayDate={currentCalendarDisplayDate}
                                    selectedDate={null} // No "selected" date in this calendar, only unavailable
                                    unavailableDates={selectedUnavailableDays}
                                    onDateSelect={handleAdminDateSelect}
                                    changeMonth={changeMonth}
                                    texts={texts}
                                    isAdmin={true}
                                />
                                <button onClick={handleSaveUnavailableDays} className="save-button" disabled={isSaving}>
                                    {isSaving ? 'Saving...' : texts.es.adminPage.saveButton}
                                </button>
                            </section>
                        )}

                        {/* Price Management Section */}
                        {activeSection === 'priceManagement' && (
                            <section className="admin-section">
                                <h2 className="admin-section-title">{texts.es.adminPage.priceManagementTitle}</h2>
                                <div className="space-y-4">
                                    {/* Plans */}
                                    <div className="form-group">
                                        <label className="form-label">Plan Prices</label>
                                        <div className="flex flex-col gap-2">
                                            <div className="price-item">
                                                <span>{texts.es.pricingSection.basicPlan}:</span>
                                                <input
                                                    type="number"
                                                    className="form-input"
                                                    value={tempPrices.basic_plan !== undefined ? tempPrices.basic_plan : 800}
                                                    onChange={(e) => handlePriceChange('basic_plan', e.target.value)}
                                                    disabled={isSaving}
                                                />
                                            </div>
                                            <div className="price-item">
                                                <span>{texts.es.pricingSection.professionalPlan}:</span>
                                                <input
                                                    type="number"
                                                    className="form-input"
                                                    value={tempPrices.professional_plan !== undefined ? tempPrices.professional_plan : 1200}
                                                    onChange={(e) => handlePriceChange('professional_plan', e.target.value)}
                                                    disabled={isSaving}
                                                />
                                            </div>
                                            <div className="price-item">
                                                <span>{texts.es.pricingSection.enterprisePlan} - Cost per Post:</span>
                                                <input
                                                    type="number"
                                                    className="form-input"
                                                    value={tempPrices.enterprise_post_cost !== undefined ? tempPrices.enterprise_post_cost : 100}
                                                    onChange={(e) => handlePriceChange('enterprise_post_cost', e.target.value)}
                                                    disabled={isSaving}
                                                />
                                            </div>
                                            <div className="price-item">
                                                <span>{texts.es.pricingSection.enterprisePlan} - Website Cost:</span>
                                                <input
                                                    type="number"
                                                    className="form-input"
                                                    value={tempPrices.enterprise_website_cost !== undefined ? tempPrices.enterprise_website_cost : 1500}
                                                    onChange={(e) => handlePriceChange('enterprise_website_cost', e.target.value)}
                                                    disabled={isSaving}
                                                />
                                            </div>
                                            <div className="price-item">
                                                <span>{texts.es.pricingSection.enterprisePlan} - Auto-Posting Cost:</span>
                                                <input
                                                    type="number"
                                                    className="form-input"
                                                    value={tempPrices.enterprise_autoposting_cost !== undefined ? tempPrices.enterprise_autoposting_cost : 300}
                                                    onChange={(e) => handlePriceChange('enterprise_autoposting_cost', e.target.value)}
                                                    disabled={isSaving}
                                                />
                                            </div>
                                        </div>
                                    </div>

                                    {/* Services */}
                                    <div className="form-group">
                                        <label className="form-label">Service Prices</label>
                                        <div className="flex flex-col gap-2">
                                            {texts.es.serviceData.map(service => (
                                                <div key={service.priceKey} className="price-item">
                                                    <span>{service.title}:</span>
                                                    <input
                                                        type="number"
                                                        className="form-input"
                                                        value={tempPrices[service.priceKey] !== undefined ? tempPrices[service.priceKey] : parseFloat(service.price.replace('$', '').replace(',', ''))}
                                                        onChange={(e) => handlePriceChange(service.priceKey, e.target.value)}
                                                        disabled={isSaving}
                                                    />
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    <button onClick={handleSavePrices} className="save-button" disabled={isSaving}>
                                        {isSaving ? 'Saving...' : texts.es.adminPage.savePricesButton}
                                    </button>
                                </div>
                            </section>
                        )}

                        {/* Location Management Section */}
                        {activeSection === 'locationManagement' && (
                            <section className="admin-section">
                                <h2 className="admin-section-title">{texts.es.adminPage.locationManagementTitle}</h2>
                                <div className="form-group">
                                    <label htmlFor="locationSelect" className="form-label">{texts.es.adminPage.selectLocation}</label>
                                    <select
                                        id="locationSelect"
                                        className="location-select"
                                        value={tempLocation}
                                        onChange={handleLocationChange}
                                        disabled={isSaving}
                                    >
                                        <option value={texts.es.contactSection.locationDR}>{texts.es.adminPage.locationDR}</option>
                                        <option value={texts.es.contactSection.locationUS}>{texts.es.adminPage.locationUS}</option>
                                    </select>
                                </div>
                                <button onClick={handleSaveLocation} className="save-button" disabled={isSaving}>
                                    {isSaving ? 'Saving...' : texts.es.adminPage.saveLocationButton}
                                </button>
                            </section>
                        )}
                    </div>
                </div>
            );
        };


        // Main application component
        const App = () => {
            // State to control the theme: 'light', 'dark', 'neon'
            const [themeMode, setThemeMode] = useState(() => {
                // Start with dark theme enabled
                const savedTheme = localStorage.getItem('dezgital-theme');
                return savedTheme || 'dark'; // 'dark' by default if nothing saved
            });

            // State to control the current page: 'home' or 'detailed-services'
            const [currentPage, setCurrentPage] = useState('home');
            // New state to keep the selected category from the home page
            const [initialFilterCategory, setInitialFilterCategory] = useState(null);
            // New state to keep the selected plan name for the OrderPage
            const [selectedPlan, setSelectedPlan] = useState('');
            // New state to keep the selected service title for the ProcessedPage
            const [selectedService, setSelectedService] = useState(null); // Now stores the full service object


            // State to control the current language (always Spanish)
            const [currentLanguage, setCurrentLanguage] = useState('es'); // Always 'es'

            // State for ToastNotification
            const [toast, setToast] = useState(null); // { message: '...', type: 'success' }

            // Function to show toast
            const showToast = useCallback((message, type = 'success') => {
                setToast({ message, type });
            }, []);


            // State to store unavailable dates (now purely local, initialized with an empty array)
            const [unavailableDates, setUnavailableDates] = useState([]);

            // State to store custom prices (now purely local, initialized with default values)
            const [prices, setPrices] = useState({
                basic_plan: 800,
                professional_plan: 1200,
                enterprise_post_cost: 100,
                enterprise_website_cost: 1500,
                enterprise_autoposting_cost: 300,
                studio: 200,
                street: 400,
                brand: 100,
                social_media_video: 150,
                commercial: 500, // Changed base price to $500
                music_video: 1500,
                music_video_plus: 2500,
                video_editing: 300,
                vfx: 70,
                informative_website: 1000,
                e_commerce_website: 2500,
                mobile_app: 2000,
                company_management_system: 5000,
                business_card: 1000,
                design: 200,
                logo: 120,
                conceptualization: 300
            });

            // State to store current location (now purely local, initialized to DR)
            const [currentLocation, setCurrentLocation] = useState(texts.es.contactSection.locationDR);


            // State and ref for global floating element parallax logic
            const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });

            // Function to navigate to services page with a specific filter
            const navigateToServices = useCallback((category = 'todos') => {
                setCurrentPage('detailed-services');
                setInitialFilterCategory(category);
            }, []);

            // Function to toggle theme
            const toggleTheme = useCallback((targetTheme) => {
                if (targetTheme === 'dark') {
                    setThemeMode(prevMode => prevMode === 'dark' ? 'light' : 'dark');
                } else if (targetTheme === 'neon') {
                    setThemeMode(prevMode => prevMode === 'neon' ? 'light' : 'neon');
                }
            }, []); // Empty dependency array means it's created once


            // Firebase initialization and authentication removed.
            // The app will always be "ready" and "loading" will be false.
            const isLoading = false;


            useEffect(() => {
                // Effect to apply theme class to body
                document.body.classList.remove('light-mode', 'dark-mode', 'neon-mode'); // Clear existing classes
                document.body.classList.add(themeMode + '-mode'); // Add current theme class
                localStorage.setItem('dezgital-theme', themeMode); // Save preference
                localStorage.setItem('dezgital-language', currentLanguage); // Save language preference


                // Global floating element parallax logic
                const handleScroll = () => {
                    const scrolled = window.pageYOffset;
                    const elements = document.querySelectorAll('.floating-element'); // Select all floating elements
                    elements.forEach((element, index) => {
                        // Slower and more subtle movement
                        const speed = 0.05 + (index * 0.005); // Reduced base speed and smaller variation
                        const mouseXOffset = (mousePosition.x - window.innerWidth / 2) * 0.01; // Smaller mouse impact
                        const mouseYOffset = (mousePosition.y - window.innerHeight / 2) * 0.005; // Smaller vertical impact
                        element.style.transform = `translateY(${scrolled * speed + mouseYOffset}px) translateX(${scrolled * speed * 0.5 + mouseXOffset}px) rotate(${scrolled * 0.01}deg)`; // Slower rotation and horizontal displacement
                    });
                };

                const handleMouseMove = (event) => {
                    setMousePosition({ x: event.clientX, y: event.clientY });
                };

                window.addEventListener('scroll', handleScroll);
                window.addEventListener('mousemove', handleMouseMove); // Global mouse listener
                handleScroll(); // Initial parallax application

                return () => {
                    window.removeEventListener('scroll', handleScroll);
                    window.removeEventListener('mousemove', handleMouseMove);
                };
            }, [themeMode, mousePosition, currentLanguage]); // Dependencies: themeMode to re-render if it changes, mousePosition for parallax, currentLanguage to save language

            // Scroll to top when current page changes
            useEffect(() => {
                window.scrollTo(0, 0);
                // Reset body overflow when navigating to home page
                if (currentPage === 'home') {
                    document.body.style.overflow = '';
                }
            }, [currentPage]);


            return (
                <div className="App">
                    {/* Existing floating elements container */}
                    <div className="floating-elements">
                        <div className="floating-element" style={{ width: '120px', height: '120px', borderRadius: '15px', top: '10%', left: '5%', animationDelay: '0s' }}></div>
                        <div className="floating-element" style={{ width: '100px', height: '100px', borderRadius: '50%', top: '45%', right: '10%', animationDelay: '-8s' }}></div>
                        <div className="floating-element" style={{ width: '110px', height: '110px', borderRadius: '30%', bottom: '15%', left: '30%', animationDelay: '-16s' }}></div>
                    </div>

                    {themeMode === 'dark' && (
                        <div className="dark-mode-animated-graphic"></div>
                    )}

                    <Navbar toggleTheme={toggleTheme} themeMode={themeMode} currentPage={currentPage} setCurrentPage={setCurrentPage} texts={texts} />

                    <div className="main-page-card max-w-screen-xl mx-auto my-8 p-8 rounded-3xl shadow-xl bg-card-light border border-border-card-light">
                        {isLoading ? (
                            <div className="flex justify-center items-center h-96">
                                <i className="fas fa-spinner fa-spin text-4xl text-dez-primary"></i>
                                <p className="ml-4 text-dez-dark-text">Loading application...</p>
                            </div>
                        ) : (
                            <>
                                {currentPage === 'home' && (
                                    <>
                                        <Hero navigateToServices={navigateToServices} texts={texts} setCurrentPage={setCurrentPage} />
                                        <Services navigateToServices={navigateToServices} texts={texts} />
                                        <Pricing texts={texts} setCurrentPage={setCurrentPage} setSelectedPlan={setSelectedPlan} prices={prices} />
                                        <AboutUs texts={texts} />
                                        <Contact texts={texts} currentLocation={currentLocation} />
                                    </>
                                )}
                                {currentPage === 'detailed-services' && <DetailedServicesPage setCurrentPage={setCurrentPage} initialFilterCategory={initialFilterCategory} texts={texts} setSelectedService={setSelectedService} prices={prices} />}
                                {currentPage === 'imagine' && <ImaginePage setCurrentPage={setCurrentPage} texts={texts} />}
                                {currentPage === 'order' && <OrderPage setCurrentPage={setCurrentPage} planName={selectedPlan} texts={texts} unavailableDates={unavailableDates} />}
                                {currentPage === 'processed' && selectedService && <ProcessedPage setCurrentPage={setCurrentPage} serviceTitle={selectedService} texts={texts} unavailableDates={unavailableDates} prices={prices} />}
                                {currentPage === 'admin' && <AdminPage setCurrentPage={setCurrentPage} texts={texts} unavailableDates={unavailableDates} setUnavailableDates={setUnavailableDates} prices={prices} setPrices={setPrices} currentLocation={currentLocation} setCurrentLocation={setCurrentLocation} showToast={showToast} />}
                            </>
                        )}
                    </div>
                    {/* Footer moved outside main-page-card */}
                    <Footer currentLanguage={currentLanguage} texts={texts} setCurrentPage={setCurrentPage} />
                    {/* Modal root for custom modals */}
                    <div id="modal-root"></div>
                    {/* Toast Notification */}
                    {toast && <ToastNotification message={toast.message} type={toast.type} onClose={() => setToast(null)} />}
                </div>
            );
        };

        // Render the application to the 'root' element
        window.onload = function() {
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<App />);
        };
    </script>
</body>
</html>
